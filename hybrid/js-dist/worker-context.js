function interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}function createCommonjsModule(e,t){return t={exports:{}},e(t,t.exports),t.exports}function __extends(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function __decorate(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}function __metadata(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function __param(e,t){return function(n,r){t(n,r,e)}}function __awaiter(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}u((r=r.apply(e,t)).next())})}function createNativeDOMException(e,t){return new DOMException.prototype.constructor(t,e||"DOMException")}function createError(e,t){var n=new Error(t);return n.name=e||"DOMException",n.message=t,n}function logError(e,t,n){if(CFG.DEBUG){n&&n.message&&(n=n.message);var r="function"==typeof console.error?"error":"log";console[r](e+": "+t+". "+(n||"")),console.trace&&console.trace()}}function isErrorOrDOMErrorOrDOMException(e){return isObj(e)&&"string"==typeof e.name}function findError(e){var t=void 0;if(e){if(1===e.length)return e[0];for(var n=0;n<e.length;n++){var r=e[n];if(isErrorOrDOMErrorOrDOMException(r))return r;r&&"string"==typeof r.message&&(t=r)}}return t}function escapeNULAndCasing(e){return e.replace(/\^/g,"^^").replace(/\x00/g,"^0").replace(/([A-Z])/g,"^$1")}function sqlEscape(e){return e.replace(/"/g,'""')}function quote(e){return'"'+sqlEscape(e)+'"'}function escapeDatabaseName(e){return"D_"+escapeNULAndCasing(e)}function escapeStore(e){return quote("s_"+escapeNULAndCasing(e))}function escapeIndex(e){return quote("_"+escapeNULAndCasing(e))}function escapeIndexName(e){return"_"+escapeNULAndCasing(e)}function sqlLIKEEscape(e){return sqlEscape(e).replace(/\^/g,"^^")}function instanceOf(e,t){return t[Symbol.hasInstance](e)}function isObj(e){return e&&"object"===("undefined"==typeof e?"undefined":_typeof$1(e))}function isDate(e){return isObj(e)&&"function"==typeof e.getDate}function isBlob(e){return isObj(e)&&"number"==typeof e.size&&"function"==typeof e.slice}function isRegExp(e){return isObj(e)&&"string"==typeof e.flags&&"function"==typeof e.exec}function isFile(e){return isObj(e)&&"string"==typeof e.name&&isBlob(e)}function isNotClonable(e){return["function","symbol"].includes("undefined"==typeof e?"undefined":_typeof$1(e))||isObj(e)&&(e instanceof Error||e.nodeType>0&&"string"==typeof e.nodeName)}function throwIfNotClonable(e,t){JSON.stringify(e,function(e,n){if(isNotClonable(n))throw createDOMException("DataCloneError",t);return n})}function defineReadonlyProperties(e,t){t="string"==typeof t?[t]:t,t.forEach(function(t){Object.defineProperty(e,"__"+t,{enumerable:!1,configurable:!1,writable:!0}),Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:function(){return this["__"+t]}})})}function isIdentifier(e){var t=CFG.UnicodeIDStart||"[$A-Z_a-z]",n=CFG.UnicodeIDContinue||"[$0-9A-Z_a-z]",r="(?:"+t+"|[$_]|\\\\"+UnicodeEscapeSequence+")",o="(?:"+n+"|[$_]|\\\\"+UnicodeEscapeSequence+"|\\u200C|\\u200D)";return new RegExp("^"+r+o+"*$").test(e)}function isValidKeyPathString(e){return"string"==typeof e&&(""===e||isIdentifier(e)||e.split(".").every(isIdentifier))}function isValidKeyPath(e){return isValidKeyPathString(e)||Array.isArray(e)&&e.length&&Array.apply(null,e).every(function(e){return isValidKeyPathString(e.toString())})}function createEvent(e,t,n){var r=new ShimEvent(e,n);return r.debug=t,r}function IDBVersionChangeEvent(e,t){ShimEvent.call(this,e),Object.defineProperty(this,"oldVersion",{enumerable:!0,configurable:!0,get:function(){return t.oldVersion}}),Object.defineProperty(this,"newVersion",{enumerable:!0,configurable:!0,get:function(){return t.newVersion}})}function _possibleConstructorReturn$1(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits$1(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck$1(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function padBase32Exponent(e){return e=e.toString(32),1===e.length?"0"+e:e}function padBase32Mantissa(e){return(e+zeros(11)).slice(0,11)}function flipBase32(e){for(var t="",n=0;n<e.length;n++)t+=(31-parseInt(e[n],32)).toString(32);return t}function pow32(e,t){if(t=parseInt(t,32),t<0)return roundToPrecision(parseInt(e,32)*Math.pow(32,t-10));if(t<11){var n=e.slice(0,t);n=parseInt(n,32);var r=e.slice(t);return r=parseInt(r,32)*Math.pow(32,t-11),roundToPrecision(n+r)}var o=e+zeros(t-11);return parseInt(o,32)}function roundToPrecision(e,t){return t=t||16,parseFloat(e.toPrecision(t))}function zeros(e){for(var t="";e--;)t+="0";return t}function negate(e){return"-"+e}function getType(e){return Array.isArray(e)?"array":isDate(e)?"date":"undefined"==typeof e?"undefined":_typeof$3(e)}function convertValueToKey(e,t,n){var r=getType(e);switch(r){case"ArrayBuffer":return e;case"array":t=t||[],t.push(e);for(var o=[],i=0;i<e.length;i++){var a=e[i];if(t.includes(a))throw createDOMException("DataError","An array key cannot be circular");var s=void 0;try{s=convertValueToKey(a,t)}catch(e){if(!n)throw e}n&&o.includes(s)||o.push(s)}return o;case"date":if(!Number.isNaN(e.getTime()))return new Date(e.getTime());default:if(!["string","number"].includes(r)||Number.isNaN(e))throw createDOMException("DataError","Not a valid key");return e}}function convertValueToKeyMultiEntry(e){return convertValueToKey(e,null,!0)}function extractKeyFromValueUsingKeyPath(e,t,n){var r=evaluateKeyPathOnValue(e,t,n);return n?convertValueToKeyMultiEntry(r):convertValueToKey(r)}function evaluateKeyPathOnValue(e,t,n){if(Array.isArray(t)){var r=function(){var r=[];return{v:t.some(function(t){t=isObj(t)?t.toString():t;var o=extractKeyFromValueUsingKeyPath(e,t,n);try{o=convertValueToKey(o)}catch(e){return!0}r.push(o)},[])?void 0:r}}();if("object"===("undefined"==typeof r?"undefined":_typeof$3(r)))return r.v}if(""===t)return e;var o=t.split(".");return o.some(function(t,n){return"length"===t&&"string"==typeof e&&n===o.length-1?(e=e.length,!0):isObj(e)?(e=e[t],void 0===e):(e=void 0,!0)}),e}function setValue(e,t,n){for(var r=t.split("."),o=0;o<r.length-1;o++){var i=r[o];e=e[i]=e[i]||{}}e[r[r.length-1]]=n}function isMultiEntryMatch(e,t){var n=collations[t.substring(0,1)];return"array"===n?t.indexOf(e)>1:t===e}function isKeyInRange(e,t,n){var r=void 0===t.lower,o=void 0===t.upper,i=_encode(e,!0),a=n?t.__lowerCached:_encode(t.lower,!0),s=n?t.__upperCached:_encode(t.upper,!0);return void 0!==t.lower&&(t.lowerOpen&&i>a&&(r=!0),!t.lowerOpen&&i>=a&&(r=!0)),void 0!==t.upper&&(t.upperOpen&&i<s&&(o=!0),!t.upperOpen&&i<=s&&(o=!0)),r&&o}function findMultiEntryMatches(e,t){var n=[];if(Array.isArray(e))for(var r=0;r<e.length;r++){var o=e[r];if(Array.isArray(o)){if(t.lower===t.upper)continue;if(1!==o.length){var i=findMultiEntryMatches(o,t);i.length>0&&n.push(o);continue}o=o[0]}isKeyInRange(o,t,!0)&&n.push(o)}else isKeyInRange(e,t,!0)&&n.push(e);return n}function _encode(e,t){return void 0===e?null:types[getType(e)].encode(e,t)}function _decode(e,t){if("string"==typeof e)return types[collations[e.substring(0,1)]].decode(e,t)}function IDBKeyRange(e,t,n,r){if(void 0===e&&void 0===t)throw new TypeError("Both arguments to the key range method cannot be undefined");if(void 0!==e&&Key.convertValueToKey(e),void 0!==t&&Key.convertValueToKey(t),void 0!==e&&void 0!==t&&e!==t&&Key.encode(e)>Key.encode(t))throw createDOMException("DataError","`lower` must not be greater than `upper` argument in `bound()` call.");this.__lower=e,this.__upper=t,this.__lowerOpen=!!n,this.__upperOpen=!!r}function setSQLForRange(e,t,n,r,o,i){!e||void 0===e.lower&&void 0===e.upper||(o&&n.push("AND"),void 0!==e.lower&&(n.push(t,e.lowerOpen?">":">=","?"),r.push(i?e.__lowerCached:Key.encode(e.lower))),void 0!==e.lower&&void 0!==e.upper&&n.push("AND"),void 0!==e.upper&&(n.push(t,e.upperOpen?"<":"<=","?"),r.push(i?e.__upperCached:Key.encode(e.upper))))}function decycle(object,callback){function checkForCompletion(){0===queuedObjects.length&&returnCallback(derezObj)}function readBlobAsDataURL(e,t){var n=new FileReader;n.onloadend=function(n){var r=n.target.result,o="Blob";isFile(e),updateEncodedBlob(r,t,o)},n.readAsDataURL(e)}function updateEncodedBlob(dataURL,path,blobtype){var encoded=queuedObjects.indexOf(path);path=path.replace("$","derezObj"),eval(path+'.$enc="'+dataURL+'"'),eval(path+'.$type="'+blobtype+'"'),queuedObjects.splice(encoded,1),checkForCompletion()}function derez(e,t){var n=void 0,r=void 0,o=void 0,i=isObj(e),a=i&&_typeof$6(e.valueOf());if(!(!i||["boolean","number","string"].includes(a)||isDate(e)||isRegExp(e)||isBlob(Blob))){for(n=0;n<objects.length;n+=1)if(objects[n]===e)return{$ref:paths[n]};if(objects.push(e),paths.push(t),Array.isArray(e))for(o=[],n=0;n<e.length;n+=1)o[n]=derez(e[n],t+"["+n+"]");else{o={};for(r in e)Object.prototype.hasOwnProperty.call(e,r)&&(o[r]=derez(e[r],t+"["+JSON.stringify(r)+"]"))}return o}return isBlob(e)?(queuedObjects.push(t),readBlobAsDataURL(e,t)):"boolean"===a?e={$type:"Boolean",$enc:e.toString()}:isDate(e)?e={$type:"Date",$enc:e.getTime()}:"number"===a?e={$type:"Number",$enc:e.toString()}:isRegExp(e)?e={$type:"RegExp",$enc:e.toString()}:"number"==typeof e?e={$type:"number",$enc:e+""}:void 0===e&&(e={$type:"undefined"}),e}var objects=[],paths=[],queuedObjects=[],returnCallback=callback,derezObj=void 0;derezObj=derez(object,"$"),checkForCompletion()}function retrocycle($){function dataURLToBlob(e){var t=";base64,",n=void 0,r=void 0,o=void 0;if(!e.includes(t))return r=e.split(","),n=r[0].split(":")[1],o=r[1],new Blob([o],{type:n});r=e.split(t),n=r[0].split(":")[1],o=atob(r[1]);for(var i=o.length,a=new Uint8Array(i),s=0;s<i;++s)a[s]=o.charCodeAt(s);return new Blob([a.buffer],{type:n})}function rez(value){var i=void 0,item=void 0,name=void 0,path=void 0;if(isObj(value))if(Array.isArray(value))for(i=0;i<value.length;i+=1)item=value[i],isObj(item)&&(path=item.$ref,"string"==typeof path&&px.test(path)?value[i]=eval(path):value[i]=rez(item));else if(void 0!==value.$type)switch(value.$type){case"Blob":case"File":value=dataURLToBlob(value.$enc);break;case"Boolean":value=Boolean("true"===value.$enc);break;case"Date":value=new Date(value.$enc);break;case"Number":value=Number(value.$enc);break;case"RegExp":value=eval(value.$enc);break;case"number":value=parseFloat(value.$enc);break;case"undefined":value=void 0}else for(name in value)"object"===_typeof$6(value[name])&&(item=value[name],item&&(path=item.$ref,"string"==typeof path&&px.test(path)?value[name]=eval(path):value[name]=rez(item)));return value}var px=/^\$(?:\[(?:\d+|"(?:[^\\"\u0000-\u001f]|\\([\\"\/bfnrt]|u[0-9a-zA-Z]{4}))*")])*$/;return rez($)}function encode(e,t){function n(e){t(JSON.stringify(e))}decycle(e,n)}function decode(e){return retrocycle(JSON.parse(e))}function _toConsumableArray$1(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function IDBIndex(e,t){this.__objectStore=e,this.__name=t.columnName,this.__keyPath=Array.isArray(t.keyPath)?t.keyPath.slice():t.keyPath;var n=t.optionalParams;this.__multiEntry=!(!n||!n.multiEntry),this.__unique=!(!n||!n.unique),this.__deleted=!!t.__deleted,this.__objectStore.__cursors=t.cursors||[]}function executeFetchIndexData(e,t,n,r,o,i,a,s,u,c,l){s.executeSql(i.join(" "),a,function(i,a){var s=0,u=null;if(e.multiEntry)for(var l=function(r){var i=a.rows.item(r),c=Key.decode(i[escapeIndexName(e.name)]);t&&(o&&n.some(function(e){return c.includes(e)})||Key.isMultiEntryMatch(n,i[escapeIndexName(e.name)]))?(s++,u=u||i):t||o||void 0!==c&&(s+=Array.isArray(c)?c.length:1,u=u||i)},f=0;f<a.rows.length;f++)l(f);else s=a.rows.length,u=s&&a.rows.item(0);c("count"===r?s:0===s?void 0:"key"===r?Key.decode(u.key):Sca.decode(u.value))},l)}function fetchIndexData(e,t,n,r,o){var i=["SELECT * FROM",escapeStore(e.objectStore.name),"WHERE",escapeIndex(e.name),"NOT NULL"],a=[];return t&&(o?(i.push("AND ("),n.forEach(function(t,n){n>0&&i.push("OR"),i.push(escapeIndex(e.name),"LIKE ? ESCAPE '^' "),a.push("%"+sqlLIKEEscape(Key.encode(t,e.multiEntry))+"%")}),i.push(")")):e.multiEntry?(i.push("AND",escapeIndex(e.name),"LIKE ? ESCAPE '^'"),n=Key.encode(n,e.multiEntry),a.push("%"+sqlLIKEEscape(n)+"%")):(instanceOf(n,IDBKeyRange)?"[object IDBKeyRange]"!==!n.toString()&&(n=new IDBKeyRange(n.lower,n.upper,n.lowerOpen,n.upperOpen)):n=IDBKeyRange.only(n),setSQLForRange(n,escapeIndex(e.name),i,a,!0,!1))),CFG.DEBUG&&console.log("Trying to fetch data for Index",i.join(" "),a),[e,t,n,r,o,i,a]}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function IDBObjectStore(e,t){this.__name=e.name,this.__keyPath=Array.isArray(e.keyPath)?e.keyPath.slice():e.keyPath,this.__transaction=t,this.__idbdb=e.idbdb,this.__cursors=e.cursors||[],this.__autoIncrement=!!e.autoInc,this.__indexes={},this.__indexNames=new StringList;var n=e.indexList;for(var r in n)if(n.hasOwnProperty(r)){var o=new IDBIndex(this,n[r]);this.__indexes[o.name]=o,o.__deleted||this.indexNames.push(o.name)}}function IDBTransaction$1(e,t,n){var r=this;this.__id=++uniqueID,this.__active=!0,this.__running=!1,this.__errored=!1,this.__requests=[],this.__objectStoreNames=t,this.__mode=n,this.__db=e,this.__error=null,this.__internal=!1,this.onabort=this.onerror=this.oncomplete=null,this.__storeClones={},this.__setOptions({defaultSync:!0}),setTimeout(function(){r.__executeRequests()},0)}function IDBDatabase(e,t,n,r){var o=this;this.__db=e,this.__closed=!1,this.__version=n,this.__name=t,this.onabort=this.onerror=this.onversionchange=null,this.__objectStores={},this.__objectStoreNames=new StringList;for(var i={},a=function(e){var t=r.rows.item(e);i.name=t.name,["keyPath","autoInc","indexList"].forEach(function(e){i[e]=JSON.parse(t[e])}),i.idbdb=o;var n=new IDBObjectStore(i);o.__objectStores[n.name]=n,o.objectStoreNames.push(n.name)},s=0;s<r.rows.length;s++)a(s)}function createSysDB(e,t){function n(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];var o=findError(n);CFG.DEBUG&&console.log("Error in sysdb transaction - when creating dbVersions",o),t(o)}sysdb?e():(sysdb=CFG.win.openDatabase("__sysdb__.sqlite",1,"System Database",CFG.DEFAULT_DB_SIZE),sysdb.transaction(function(t){t.executeSql("CREATE TABLE IF NOT EXISTS dbVersions (name VARCHAR(255), version INT);",[],e,n)},n))}function IDBFactory(){this.modules={DOMException:DOMException$1,Event:"undefined"!=typeof Event?Event:ShimEvent,ShimEvent:ShimEvent,IDBFactory:IDBFactory}}function cmp(e,t){if(arguments.length<2)throw new TypeError("You must provide two keys to be compared");Key.convertValueToKey(e),Key.convertValueToKey(t);var n=Key.encode(e),r=Key.encode(t),o=n>r?1:n===r?0:-1;if(CFG.DEBUG){var i=Key.decode(n),a=Key.decode(r);"object"===("undefined"==typeof e?"undefined":_typeof$4(e))&&(e=JSON.stringify(e),i=JSON.stringify(i)),"object"===("undefined"==typeof t?"undefined":_typeof$4(t))&&(t=JSON.stringify(t),a=JSON.stringify(a)),i!==e&&console.warn(e+" was incorrectly encoded as "+i),a!==t&&console.warn(t+" was incorrectly encoded as "+a)}return o}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function IDBCursor(e,t,n,r,o,i,a){if(IDBTransaction$1.__assertActive(n.transaction),null===e&&(e=void 0),instanceOf(e,IDBKeyRange)?"[object IDBKeyRange]"!==!e.toString()&&(e=new IDBKeyRange(e.lower,e.upper,e.lowerOpen,e.upperOpen)):void 0!==e&&(e=new IDBKeyRange(e,e,!1,!1)),void 0!==t&&!["next","prev","nextunique","prevunique"].includes(t))throw new TypeError(t+"is not a valid cursor direction");Object.defineProperties(this,{source:{writable:!1,value:r},direction:{writable:!1,value:t||"next"}}),this.__key=void 0,this.__primaryKey=void 0,this.__store=n,this.__range=e,this.__req=new IDBRequest,this.__req.__source=r,this.__req.__transaction=this.__store.transaction,this.__keyColumnName=o,this.__valueColumnName=i,this.__keyOnly="key"===i,this.__valueDecoder=this.__keyOnly?Key:Sca,this.__count=a,this.__prefetchedIndex=-1,this.__indexSource=instanceOf(r,IDBIndex),this.__multiEntryIndex=!!this.__indexSource&&r.multiEntry,this.__unique=this.direction.includes("unique"),this.__sqlDirection=["prev","prevunique"].includes(this.direction)?"DESC":"ASC",void 0!==e&&(e.__lowerCached=void 0!==e.lower&&Key.encode(e.lower,this.__multiEntryIndex),e.__upperCached=void 0!==e.upper&&Key.encode(e.upper,this.__multiEntryIndex)),this.__gotValue=!0,this.continue()}function polyfill(){(navigator.userAgent.match(/MSIE/)||navigator.userAgent.match(/Trident/)||navigator.userAgent.match(/Edge/))&&compoundKeyPolyfill()}function compoundKeyPolyfill(e,t,n,r,o,i,a,s,u){var c=r.prototype.cmp,l=n.prototype.createObjectStore,f=a.prototype.createIndex,p=a.prototype.add,d=a.prototype.put,h=o.prototype.get,y=o.prototype.getKey,_=o.prototype.openCursor,v=o.prototype.openKeyCursor,m=a.prototype.get,g=a.prototype.delete,b=a.prototype.openCursor,E=a.prototype.openKeyCursor,D=i.bound,w=i.upperBound,I=i.lowerBound,B=i.only,x=Object.getOwnPropertyDescriptor(s.prototype,"result"),S=Object.getOwnPropertyDescriptor(e.prototype,"primaryKey"),T=Object.getOwnPropertyDescriptor(e.prototype,"key"),O=Object.getOwnPropertyDescriptor(t.prototype,"value");r.prototype.cmp=function(e,t){var n=Array.prototype.slice.call(arguments);return Array.isArray(e)&&(n[0]=encodeCompoundKey(e)),Array.isArray(t)&&(n[1]=encodeCompoundKey(t)),c.apply(this,n)},n.prototype.createObjectStore=function(e,t){return t&&Array.isArray(t.keyPath)&&(t.keyPath=encodeCompoundKeyPath(t.keyPath)),l.apply(this,arguments)},a.prototype.createIndex=function(e,t,n){var r=Array.prototype.slice.call(arguments);return Array.isArray(t)&&(r[1]=encodeCompoundKeyPath(t)),f.apply(this,r)},a.prototype.add=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.__insertData(p,t)},a.prototype.put=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.__insertData(d,t)},a.prototype.__insertData=function(e,t){t=Array.prototype.slice.call(t);var n=t[0],r=t[1];if(Array.isArray(r)&&(t[1]=encodeCompoundKey(r)),"object"===("undefined"==typeof n?"undefined":_typeof$7(n))){isCompoundKey(this.keyPath)&&setInlineCompoundKey(n,this.keyPath);for(var o=0;o<this.indexNames.length;o++){var i=this.index(this.indexNames[o]);if(isCompoundKey(i.keyPath))try{setInlineCompoundKey(n,i.keyPath,i.multiEntry)}catch(e){}}}return e.apply(this,t)},o.prototype.get=function(e){var t=Array.prototype.slice.call(arguments);return Array.isArray(e)&&(t[0]=encodeCompoundKey(e)),h.apply(this,t)},o.prototype.getKey=function(e){var t=Array.prototype.slice.call(arguments);return Array.isArray(e)&&(t[0]=encodeCompoundKey(e)),y.apply(this,t)},o.prototype.openCursor=function(e){var t=Array.prototype.slice.call(arguments);return Array.isArray(e)&&(t[0]=encodeCompoundKey(e)),_.apply(this,t)},o.prototype.openKeyCursor=function(e){var t=Array.prototype.slice.call(arguments);return Array.isArray(e)&&(t[0]=encodeCompoundKey(e)),v.apply(this,t)},a.prototype.get=function(e){var t=Array.prototype.slice.call(arguments);return Array.isArray(e)&&(t[0]=encodeCompoundKey(e)),m.apply(this,t)},a.prototype.delete=function(e){var t=Array.prototype.slice.call(arguments);return Array.isArray(e)&&(t[0]=encodeCompoundKey(e)),g.apply(this,t)},a.prototype.openCursor=function(e){var t=Array.prototype.slice.call(arguments);return Array.isArray(e)&&(t[0]=encodeCompoundKey(e)),b.apply(this,t)},a.prototype.openKeyCursor=function(e){var t=Array.prototype.slice.call(arguments);return Array.isArray(e)&&(t[0]=encodeCompoundKey(e)),E.apply(this,t)},i.bound=function(e,t,n,r){var o=Array.prototype.slice.call(arguments);return Array.isArray(e)&&(o[0]=encodeCompoundKey(e)),Array.isArray(t)&&(o[1]=encodeCompoundKey(t)),D.apply(i,o)},i.upperBound=function(e,t){var n=Array.prototype.slice.call(arguments);return Array.isArray(e)&&(n[0]=encodeCompoundKey(e)),w.apply(i,n)},i.lowerBound=function(e,t){var n=Array.prototype.slice.call(arguments);return Array.isArray(e)&&(n[0]=encodeCompoundKey(e)),I.apply(i,n)},i.only=function(e){var t=Array.prototype.slice.call(arguments);return Array.isArray(e)&&(t[0]=encodeCompoundKey(e)),B.apply(i,t)},Object.defineProperty(s.prototype,"result",{enumerable:x.enumerable,configurable:x.configurable,get:function(){var e=x.get.call(this);return removeInlineCompoundKey(e)}}),Object.defineProperty(e.prototype,"primaryKey",{enumerable:S.enumerable,configurable:S.configurable,get:function(){var e=S.get.call(this);return removeInlineCompoundKey(e)}}),Object.defineProperty(e.prototype,"key",{enumerable:T.enumerable,configurable:T.configurable,get:function(){var e=T.get.call(this);return removeInlineCompoundKey(e)}}),Object.defineProperty(t.prototype,"value",{enumerable:O.enumerable,configurable:O.configurable,get:function(){var e=O.get.call(this);return removeInlineCompoundKey(e)}})}function isCompoundKey(e){return e&&0===e.indexOf(compoundKeysPropertyName+".")}function encodeCompoundKeyPath(e){for(var t=0;t<e.length;t++)e[t]=e[t].replace(/\./g,propertySeparator);return compoundKeysPropertyName+"."+e.join(keySeparator)}function decodeCompoundKeyPath(e){e=e.substr(compoundKeysPropertyName.length+1),e=e.split(keySeparator);for(var t=0;t<e.length;t++)e[t]=e[t].replace(propertySeparatorRegExp,".");return e}function setInlineCompoundKey(e,t,n){var r=decodeCompoundKeyPath(t),o=Key.evaluateKeyPathOnValue(e,r,n),i=encodeCompoundKey(o);t=t.substr(compoundKeysPropertyName.length+1),e[compoundKeysPropertyName]=e[compoundKeysPropertyName]||{},e[compoundKeysPropertyName][t]=i}function removeInlineCompoundKey(e){return"string"==typeof e&&isCompoundKey(e)?decodeCompoundKey(e):(e&&"object"===_typeof$7(e[compoundKeysPropertyName])&&delete e[compoundKeysPropertyName],e)}function encodeCompoundKey(e){return Key.convertValueToKey(e),e=Key.encode(e),e=compoundKeysPropertyName+"."+e,validateKeyLength(e),e}function decodeCompoundKey(e){return validateKeyLength(e),e=e.substr(compoundKeysPropertyName.length+1),e=Key.decode(e)}function validateKeyLength(e){if(e.length>889)throw createDOMException("DataError","The encoded key is "+e.length+" characters long, but IE only allows 889 characters. Consider replacing numeric keys with strings to reduce the encoded length.")}function shim(e,t){try{IDB[e]=t}catch(e){console.log(e)}if(IDB[e]!==t&&Object.defineProperty){try{var n={value:t};"indexedDB"===e&&(n.writable=!1),Object.defineProperty(IDB,e,n)}catch(e){}IDB[e]!==t&&"undefined"!=typeof console&&console.warn&&console.warn("Unable to shim "+e)}}function setGlobalVars(e){IDB=e||("undefined"!=typeof window?window:"undefined"!=typeof self?self:{}),shim("shimIndexedDB",shimIndexedDB),IDB.shimIndexedDB&&(IDB.shimIndexedDB.__useShim=function(){void 0!==CFG.win.openDatabase?(shim("indexedDB",shimIndexedDB),shim("IDBFactory",IDBFactory),shim("IDBDatabase",IDBDatabase),shim("IDBObjectStore",IDBObjectStore),shim("IDBIndex",IDBIndex),shim("IDBTransaction",IDBTransaction$1),shim("IDBCursor",IDBCursor),shim("IDBCursorWithValue",IDBCursorWithValue),shim("IDBKeyRange",IDBKeyRange),shim("IDBRequest",IDBRequest),shim("IDBOpenDBRequest",IDBOpenDBRequest),shim("IDBVersionChangeEvent",IDBVersionChangeEvent)):"object"===_typeof(IDB.indexedDB)&&polyfill(IDBCursor,IDBCursorWithValue,IDBDatabase,IDBFactory,IDBIndex,IDBKeyRange,IDBObjectStore,IDBRequest,IDBTransaction$1)},IDB.shimIndexedDB.__debug=function(e){CFG.DEBUG=e},IDB.shimIndexedDB.__setConfig=function(e,t){CFG[e]=t},IDB.shimIndexedDB.__getConfig=function(e){return CFG[e]},IDB.shimIndexedDB.__setUnicodeIdentifiers=function(e){this.__setConfig("UnicodeIDStart",e.UnicodeIDStart),this.__setConfig("UnicodeIDContinue",e.UnicodeIDContinue)}),"indexedDB"in IDB||(IDB.indexedDB=IDB.indexedDB||IDB.webkitIndexedDB||IDB.mozIndexedDB||IDB.oIndexedDB||IDB.msIndexedDB);var t=!1;return"undefined"!=typeof navigator&&(navigator.userAgent.match(/Android (?:2|3|4\.[0-3])/)&&!navigator.userAgent.match(/Chrome/)||(navigator.userAgent.indexOf("Safari")===-1||navigator.userAgent.indexOf("Chrome")>-1)&&/(iPad|iPhone|iPod).* os 9_/i.test(navigator.userAgent)&&!window.MSStream)&&(t=!0),CFG.DEFAULT_DB_SIZE=1024*("undefined"!=typeof navigator&&navigator.userAgent.indexOf("Safari")>-1&&navigator.userAgent.indexOf("Chrome")===-1?25:4)*1024,void 0!==IDB.indexedDB&&IDB.indexedDB&&!t||void 0===CFG.win.openDatabase?(IDB.IDBDatabase=IDB.IDBDatabase||IDB.webkitIDBDatabase,IDB.IDBTransaction=IDB.IDBTransaction||IDB.webkitIDBTransaction||{},IDB.IDBCursor=IDB.IDBCursor||IDB.webkitIDBCursor,IDB.IDBKeyRange=IDB.IDBKeyRange||IDB.webkitIDBKeyRange):IDB.shimIndexedDB.__useShim(),IDB}var commonjsGlobal="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},es6Promise=createCommonjsModule(function(e,t){!function(n,r){"object"==typeof t&&"undefined"!=typeof e?e.exports=r():"function"==typeof define&&define.amd?define(r):n.ES6Promise=r()}(commonjsGlobal,function(){"use strict";function e(e){return"function"==typeof e||"object"==typeof e&&null!==e}function t(e){return"function"==typeof e}function n(e){W=e}function r(e){z=e}function o(){return function(){return process.nextTick(c)}}function i(){return function(){V(c)}}function a(){var e=0,t=new Y(c),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}function s(){var e=new MessageChannel;return e.port1.onmessage=c,function(){return e.port2.postMessage(0)}}function u(){var e=setTimeout;return function(){return e(c,1)}}function c(){for(var e=0;e<G;e+=2){var t=Z[e],n=Z[e+1];t(n),Z[e]=void 0,Z[e+1]=void 0}G=0}function l(){try{var e=require,t=e("vertx");return V=t.runOnLoop||t.runOnContext,i()}catch(e){return u()}}function f(e,t){var n=arguments,r=this,o=new this.constructor(d);void 0===o[te]&&$(o);var i=r._state;return i?!function(){var e=n[i-1];z(function(){return O(i,o,e,r._result)})}():B(r,o,e,t),o}function p(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var n=new t(d);return E(n,e),n}function d(){}function h(){return new TypeError("You cannot resolve a promise with itself")}function y(){return new TypeError("A promises callback cannot return that same promise.")}function _(e){try{return e.then}catch(e){return ie.error=e,ie}}function v(e,t,n,r){try{e.call(t,n,r)}catch(e){return e}}function m(e,t,n){z(function(e){var r=!1,o=v(n,t,function(n){r||(r=!0,t!==n?E(e,n):w(e,n))},function(t){r||(r=!0,I(e,t))},"Settle: "+(e._label||" unknown promise"));!r&&o&&(r=!0,I(e,o))},e)}function g(e,t){t._state===re?w(e,t._result):t._state===oe?I(e,t._result):B(t,void 0,function(t){return E(e,t)},function(t){return I(e,t)})}function b(e,n,r){n.constructor===e.constructor&&r===f&&n.constructor.resolve===p?g(e,n):r===ie?I(e,ie.error):void 0===r?w(e,n):t(r)?m(e,n,r):w(e,n)}function E(t,n){t===n?I(t,h()):e(n)?b(t,n,_(n)):w(t,n)}function D(e){e._onerror&&e._onerror(e._result),x(e)}function w(e,t){e._state===ne&&(e._result=t,e._state=re,0!==e._subscribers.length&&z(x,e))}function I(e,t){e._state===ne&&(e._state=oe,e._result=t,z(D,e))}function B(e,t,n,r){var o=e._subscribers,i=o.length;e._onerror=null,o[i]=t,o[i+re]=n,o[i+oe]=r,0===i&&e._state&&z(x,e)}function x(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r=void 0,o=void 0,i=e._result,a=0;a<t.length;a+=3)r=t[a],o=t[a+n],r?O(n,r,o,i):o(i);e._subscribers.length=0}}function S(){this.error=null}function T(e,t){try{return e(t)}catch(e){return ae.error=e,ae}}function O(e,n,r,o){var i=t(r),a=void 0,s=void 0,u=void 0,c=void 0;if(i){if(a=T(r,o),a===ae?(c=!0,s=a.error,a=null):u=!0,n===a)return void I(n,y())}else a=o,u=!0;n._state!==ne||(i&&u?E(n,a):c?I(n,s):e===re?w(n,a):e===oe&&I(n,a))}function C(e,t){try{t(function(t){E(e,t)},function(t){I(e,t)})}catch(t){I(e,t)}}function A(){return se++}function $(e){e[te]=se++,e._state=void 0,e._result=void 0,e._subscribers=[]}function j(e,t){this._instanceConstructor=e,this.promise=new e(d),this.promise[te]||$(this.promise),U(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?w(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&w(this.promise,this._result))):I(this.promise,P())}function P(){return new Error("Array Methods must be provided an Array")}function K(e){return new j(this,e).promise}function R(e){var t=this;return new t(U(e)?function(n,r){for(var o=e.length,i=0;i<o;i++)t.resolve(e[i]).then(n,r)}:function(e,t){return t(new TypeError("You must pass an array to race."))})}function N(e){var t=this,n=new t(d);return I(n,e),n}function q(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function M(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function k(e){this[te]=A(),this._result=this._state=void 0,this._subscribers=[],d!==e&&("function"!=typeof e&&q(),this instanceof k?C(this,e):M())}function L(){var e=void 0;if("undefined"!=typeof commonjsGlobal)e=commonjsGlobal;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===n&&!t.cast)return}e.Promise=k}var F=void 0;F=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var U=F,G=0,V=void 0,W=void 0,z=function(e,t){Z[G]=e,Z[G+1]=t,G+=2,2===G&&(W?W(c):ee())},Q="undefined"!=typeof window?window:void 0,H=Q||{},Y=H.MutationObserver||H.WebKitMutationObserver,J="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),X="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,Z=new Array(1e3),ee=void 0;ee=J?o():Y?a():X?s():void 0===Q?l():u();var te=Math.random().toString(36).substring(16),ne=void 0,re=1,oe=2,ie=new S,ae=new S,se=0;return j.prototype._enumerate=function(){for(var e=this.length,t=this._input,n=0;this._state===ne&&n<e;n++)this._eachEntry(t[n],n)},j.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,r=n.resolve;if(r===p){var o=_(e);if(o===f&&e._state!==ne)this._settledAt(e._state,t,e._result);else if("function"!=typeof o)this._remaining--,this._result[t]=e;else if(n===k){var i=new n(d);b(i,e,o),this._willSettleAt(i,t)}else this._willSettleAt(new n(function(t){return t(e)}),t)}else this._willSettleAt(r(e),t)},j.prototype._settledAt=function(e,t,n){
var r=this.promise;r._state===ne&&(this._remaining--,e===oe?I(r,n):this._result[t]=n),0===this._remaining&&w(r,this._result)},j.prototype._willSettleAt=function(e,t){var n=this;B(e,void 0,function(e){return n._settledAt(re,t,e)},function(e){return n._settledAt(oe,t,e)})},k.all=K,k.race=R,k.resolve=p,k.reject=N,k._setScheduler=n,k._setAsap=r,k._asap=z,k.prototype={constructor:k,then:f,catch:function(e){return this.then(null,e)}},L(),k.polyfill=L,k.Promise=k,k})});interopDefault(es6Promise);var Promise$1=es6Promise.Promise;const __assign=Object.assign||function(e){for(var t,n=1;n<arguments.length;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e};global.Promise=Promise$1,global.__bind=function(e,t){return e[t].bind(e)};var FetchEvent$1=function(){function e(e){this.respondWithPromise=null,this.type="fetch",this.request=e.request}return e.prototype.respondWith=function(e){this.respondWithPromise=e},e.prototype.resolve=function(){return null!==this.respondWithPromise?Promise.resolve(this.respondWithPromise):Promise.resolve()},e}();global.FetchEvent=FetchEvent$1;var nextTick=createCommonjsModule(function(e,t){"use strict";t.test=function(){return"undefined"!=typeof process&&!process.browser},t.install=function(e){return function(){process.nextTick(e)}}}),nextTick$1=interopDefault(nextTick),install=nextTick.install,test=nextTick.test,require$$4=Object.freeze({default:nextTick$1,install:install,test:test}),mutation=createCommonjsModule(function(e,t){"use strict";var n=commonjsGlobal.MutationObserver||commonjsGlobal.WebKitMutationObserver;t.test=function(){return n},t.install=function(e){var t=0,r=new n(e),o=commonjsGlobal.document.createTextNode("");return r.observe(o,{characterData:!0}),function(){o.data=t=++t%2}}}),mutation$1=interopDefault(mutation),install$1=mutation.install,test$1=mutation.test,require$$3=Object.freeze({default:mutation$1,install:install$1,test:test$1}),messageChannel=createCommonjsModule(function(e,t){"use strict";t.test=function(){return!commonjsGlobal.setImmediate&&"undefined"!=typeof commonjsGlobal.MessageChannel},t.install=function(e){var t=new commonjsGlobal.MessageChannel;return t.port1.onmessage=e,function(){t.port2.postMessage(0)}}}),messageChannel$1=interopDefault(messageChannel),install$2=messageChannel.install,test$2=messageChannel.test,require$$2=Object.freeze({default:messageChannel$1,install:install$2,test:test$2}),stateChange=createCommonjsModule(function(e,t){"use strict";t.test=function(){return"document"in commonjsGlobal&&"onreadystatechange"in commonjsGlobal.document.createElement("script")},t.install=function(e){return function(){var t=commonjsGlobal.document.createElement("script");return t.onreadystatechange=function(){e(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},commonjsGlobal.document.documentElement.appendChild(t),e}}}),stateChange$1=interopDefault(stateChange),install$3=stateChange.install,test$3=stateChange.test,require$$1$1=Object.freeze({default:stateChange$1,install:install$3,test:test$3}),timeout=createCommonjsModule(function(e,t){"use strict";t.test=function(){return!0},t.install=function(e){return function(){setTimeout(e,0)}}}),timeout$1=interopDefault(timeout),install$4=timeout.install,test$4=timeout.test,require$$0$1=Object.freeze({default:timeout$1,install:install$4,test:test$4}),index$1=createCommonjsModule(function(e){"use strict";function t(){i&&a&&(i=!1,a.length?l=a.concat(l):c=-1,l.length&&n())}function n(){if(!i){f=!1,i=!0;for(var e=l.length,n=setTimeout(t);e;){for(a=l,l=[];a&&++c<e;)a[c].run();c=-1,e=l.length}a=null,c=-1,i=!1,clearTimeout(n)}}function r(e,t){this.fun=e,this.array=t}function o(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new r(e,t)),f||i||(f=!0,s())}for(var i,a,s,u=[interopDefault(require$$4),interopDefault(require$$3),interopDefault(require$$2),interopDefault(require$$1$1),interopDefault(require$$0$1)],c=-1,l=[],f=!1,p=-1,d=u.length;++p<d;)if(u[p]&&u[p].test&&u[p].test()){s=u[p].install(n);break}r.prototype.run=function(){var e=this.fun,t=this.array;switch(t.length){case 0:return e();case 1:return e(t[0]);case 2:return e(t[0],t[1]);case 3:return e(t[0],t[1],t[2]);default:return e.apply(null,t)}},e.exports=o}),index$2=interopDefault(index$1),require$$1=Object.freeze({default:index$2}),index$3=createCommonjsModule(function(e){"use strict";function t(e){return function(){var t=arguments.length;if(t){for(var n=[],r=-1;++r<t;)n[r]=arguments[r];return e.call(this,n)}return e.call(this,[])}}e.exports=t}),index$4=interopDefault(index$3),require$$2$1=Object.freeze({default:index$4}),index$5=createCommonjsModule(function(e){e.exports=function(){}}),index$6=interopDefault(index$5),require$$3$1=Object.freeze({default:index$6}),index$7=createCommonjsModule(function(e){"use strict";function t(){this.length=0}t.prototype.push=function(e){var t={item:e};this.last?this.last=this.last.next=t:this.last=this.first=t,this.length++},t.prototype.shift=function(){var e=this.first;if(e)return this.first=e.next,--this.length||(this.last=void 0),e.item},t.prototype.slice=function(e,t){e="undefined"==typeof e?0:e,t="undefined"==typeof t?1/0:t;for(var n=[],r=0,o=this.first;o&&!(--t<0);o=o.next)++r>e&&n.push(o.item);return n},e.exports=t}),index$8=interopDefault(index$7),require$$2$2=Object.freeze({default:index$8}),WebSQLResultSet=createCommonjsModule(function(e){"use strict";function t(e){this._array=e,this.length=e.length}function n(e,n,r){this.insertId=e,this.rowsAffected=n,this.rows=new t(r)}t.prototype.item=function(e){return this._array[e]},e.exports=n}),WebSQLResultSet$1=interopDefault(WebSQLResultSet),require$$0$4=Object.freeze({default:WebSQLResultSet$1}),WebSQLTransaction=createCommonjsModule(function(e){"use strict";function t(){return!0}function n(e,t,n,r){return/^\s*UPDATE\b/i.test(e)?t=void 0:/^\s*CREATE\s+TABLE\b/i.test(e)?(t=0,n=0):/^\s*DROP\s+TABLE\b/i.test(e)?(t=void 0,n=0):/^\s*INSERT\b/i.test(e)||(t=void 0),new f(t,n,r)}function r(e,t,n,r){this.sql=e,this.args=t,this.sqlCallback=n,this.sqlErrorCallback=r}function o(e,t){function r(){e._running=!1,i(e)}var o=e._websqlDatabase._currentTask.readOnly;e._websqlDatabase._db.exec(t,o,function(o,i){if(o)return e._error=o,r();for(var a=0;a<i.length;a++){var s=i[a],u=t[a];if(s.error){if(u.sqlErrorCallback(e,s.error))return e._error=s.error,r()}else u.sqlCallback(e,n(t[a].sql,s.insertId,s.rowsAffected,s.rows))}r()})}function i(e){if(!e._running&&!e._complete){if(e._error)return e._complete=!0,e._websqlDatabase._onTransactionComplete(e._error);if(!e._sqlQueue.length)return e._complete=!0,e._websqlDatabase._onTransactionComplete();e._running=!0;for(var t,n=[];t=e._sqlQueue.shift();)n.push(t);o(e,n)}}function a(e,t,n,o,a){e._sqlQueue.push(new r(t,n,o,a)),e._runningTimeout||(e._runningTimeout=!0,l(function(){e._runningTimeout=!1,i(e)}))}function s(e){this._websqlDatabase=e,this._error=null,this._complete=!1,this._runningTimeout=!1,this._sqlQueue=new c,e._currentTask.readOnly||this._sqlQueue.push(new r("BEGIN;",[],u,u))}var u=interopDefault(require$$3$1),c=interopDefault(require$$2$2),l=interopDefault(require$$1),f=interopDefault(require$$0$4);s.prototype.executeSql=function(e,n,r,o){n=Array.isArray(n)?n:[],r="function"==typeof r?r:u,o="function"==typeof o?o:t,a(this,e,n,r,o)},s.prototype._checkDone=function(){i(this)},e.exports=s}),WebSQLTransaction$1=interopDefault(WebSQLTransaction),require$$0$3=Object.freeze({default:WebSQLTransaction$1}),WebSQLDatabase=createCommonjsModule(function(e){"use strict";function t(e,t,n,r){this.readOnly=e,this.txnCallback=t,this.errorCallback=n,this.successCallback=r}function n(e,t){this.version=e,this._db=t,this._txnQueue=new r,this._running=!1,this._currentTask=null}var r=interopDefault(require$$2$2),o=interopDefault(require$$1),i=interopDefault(require$$3$1),a=interopDefault(require$$0$3),s=[{sql:"ROLLBACK;",args:[]}],u=[{sql:"END;",args:[]}];n.prototype._onTransactionComplete=function(e){function t(){e?n._currentTask.errorCallback(e):n._currentTask.successCallback(),n._running=!1,n._currentTask=null,n._runNextTransaction()}var n=this;n._currentTask.readOnly?t():e?n._db.exec(s,!1,t):n._db.exec(u,!1,t)},n.prototype._runTransaction=function(){var e=this,t=new a(e);o(function(){e._currentTask.txnCallback(t),t._checkDone()})},n.prototype._runNextTransaction=function(){if(!this._running){var e=this._txnQueue.shift();e&&(this._currentTask=e,this._running=!0,this._runTransaction())}},n.prototype._createTransaction=function(e,n,r,o){if(r=r||i,o=o||i,"function"!=typeof n)throw new Error("The callback provided as parameter 1 is not a function.");this._txnQueue.push(new t(e,n,r,o)),this._runNextTransaction()},n.prototype.transaction=function(e,t,n){this._createTransaction(!1,e,t,n)},n.prototype.readTransaction=function(e,t,n){this._createTransaction(!0,e,t,n)},e.exports=n}),WebSQLDatabase$1=interopDefault(WebSQLDatabase),require$$0$2=Object.freeze({default:WebSQLDatabase$1}),custom=createCommonjsModule(function(e){"use strict";function t(e){function t(t,n){var r=new e(t);return new i(n,r)}function a(e){if(e.length<4)throw new Error("Failed to execute 'openDatabase': 4 arguments required, but only "+e.length+" present");var r=e[0],i=e[1],a=e[4]||o,s=t(r,i);return n(function(){a(s)}),s}return r(a)}var n=interopDefault(require$$1),r=interopDefault(require$$2$1),o=interopDefault(require$$3$1),i=interopDefault(require$$0$2);e.exports=t}),custom$1=interopDefault(custom),require$$0=Object.freeze({default:custom$1}),index=createCommonjsModule(function(e){e.exports=interopDefault(require$$0)}),customOpenDatabase=interopDefault(index),custOpen=customOpenDatabase.default||customOpenDatabase,CustomImplementation=function(){function e(e){var t=__WebSQLDatabaseCreator.createDB(e);if(t[0])throw t[0];this.db=t[1]}return e.prototype.exec=function(){var e=this,t=arguments;setTimeout(function(){e.db.execReadOnlyCallback.apply(e.db,t)},0)},e}(),openDatabase=customOpenDatabase(CustomImplementation);global.openDatabase=openDatabase;var EventTarget=createCommonjsModule(function(e){var t;!function(){"use strict";function n(e){return"detail"in e?new c(e.type,{bubbles:e.bubbles,cancelable:e.cancelable,detail:e.detail},e):new u(e.type,{bubbles:e.bubbles,cancelable:e.cancelable},e)}function r(e,t,n){var r=e[t];void 0===r&&(e[t]=r=[]),n="boolean"==typeof n?{capture:n}:n||{};var o=JSON.stringify(n),i=r.filter(function(e){return o===JSON.stringify(e.options)});return{listenersByTypeOptions:i,options:n,listenersByType:r}}function o(e){this.__setOptions(e)}var i={NONE:0,CAPTURING_PHASE:1,AT_TARGET:2,BUBBLING_PHASE:3};"undefined"==typeof t&&(t=function(e,t){var n=new Error(e);return n.name=t,n});var a=new WeakMap,s=new WeakMap,u=function(e,t,n){if(!arguments.length)throw new TypeError("Failed to construct 'Event': 1 argument required, but only 0 present.");t=t||{},n=n||{};var r={};r.type=e,"bubbles"in t&&(r.bubbles=t.bubbles),"cancelable"in t&&(r.cancelable=t.cancelable),"composed"in t&&(r.composed=t.composed),a.set(this,n),s.set(this,r),Object.defineProperties(this,["target","currentTarget","eventPhase","defaultPrevented"].reduce(function(e,t){return e[t]={get:function(){return void 0!==r[t]?r[t]:t in n?n[t]:"eventPhase"===t?0:"defaultPrevented"!==t&&null}},e},{}));var o=["type","bubbles","cancelable","isTrusted","timeStamp","composedPath","composed","initEvent","initCustomEvent"];"[object CustomEvent]"===this.toString()&&o.push("detail"),Object.defineProperties(this,o.reduce(function(e,t){return e[t]={get:function(){return t in r?r[t]:t in n?n[t]:!(["bubbles","cancelable","composed"].indexOf(t)>-1)&&void 0}},e},{}))};Object.defineProperties(u.prototype,{NONE:{writable:!1,value:0},CAPTURING_PHASE:{writable:!1,value:1},AT_TARGET:{writable:!1,value:2},BUBBLING_PHASE:{writable:!1,value:3}}),u.prototype.preventDefault=function(){var e=a.get(this),t=s.get(this);this.cancelable&&!t._passive&&(t.defaultPrevented=!0,"function"==typeof e.preventDefault&&e.preventDefault())},u.prototype.stopImmediatePropagation=function(){var e=s.get(this);e._stopImmediatePropagation=!0},u.prototype.stopPropagation=function(){var e=s.get(this);e._stopPropagation=!0},u.prototype.toString=function(){return"[object Event]"};var c=function(e,t,n){u.call(this,e,t,n);var r=s.get(this);r.detail=t&&"object"==typeof t?t.detail:null};c.prototype.toString=function(){return"[object CustomEvent]"};var l={addListener:function(e,t,n,o){var i=r(e,n,o),a=i.listenersByTypeOptions;o=i.options;var s=i.listenersByType;a.some(function(e){return e.listener===t})||s.push({listener:t,options:o})},removeListener:function(e,t,n,o){var i=r(e,n,o),a=i.listenersByType,s=JSON.stringify(i.options);a.some(function(r,o){if(r.listener===t&&s===JSON.stringify(r.options))return a.splice(o,1),a.length||delete e[n],!0})},hasListener:function(e,t,n,o){var i=r(e,n,o),a=i.listenersByTypeOptions;return a.some(function(e){return e.listener===t})}};Object.assign(o.prototype,["Early","","Late","Default"].reduce(function(e,n){return["add","remove","has"].forEach(function(r){e[r+n+"EventListener"]=function(e,o,i){if(arguments.length<2)throw new TypeError("2 or more arguments required");if("string"!=typeof e)throw new t("UNSPECIFIED_EVENT_TYPE_ERR","UNSPECIFIED_EVENT_TYPE_ERR");o.handleEvent&&(o=o.handleEvent.bind(o));var a="_"+n.toLowerCase()+(""===n?"l":"L")+"isteners";return this[a]||Object.defineProperty(this,a,{value:{}}),l[r+"Listener"](this[a],o,e,i)}}),e},{})),Object.assign(o.prototype,{__setOptions:function(e){e=e||{},this._defaultSync=e.defaultSync,this._extraProperties=e.extraProperties},dispatchEvent:function(e){return this._dispatchEvent(e,!0)},_dispatchEvent:function(e,r){function o(){l.eventPhase=i.NONE,l.currentTarget=null,delete l._children}function a(){l._stopImmediatePropagation=void 0,l._stopPropagation=void 0,f.defaultPrevented&&l.cancelable||(l.eventPhase=i.AT_TARGET,f.target.invokeCurrentListeners(f.target._defaultListeners,f,p)),o()}function u(){return l._stopImmediatePropagation=void 0,l._stopPropagation=void 0,c._defaultSync?a():setTimeout(a,0),l.eventPhase=i.AT_TARGET,l._stopPropagation||(l._stopImmediatePropagation=void 0,l._stopPropagation=void 0,f.target.invokeCurrentListeners(f.target._lateListeners,f,p)),o(),!f.defaultPrevented}var c=this;["early","","late","default"].forEach(function(e){var t="_"+e+(""===e?"l":"L")+"isteners";this[t]||Object.defineProperty(this,t,{value:{}})},this);var l=s.get(e);if(l&&r&&l._dispatched)throw new t("The object is in an invalid state.","InvalidStateError");var f;l?f=e:(f=n(e),l=s.get(f),l._dispatched=!0,(this._extraProperties||[]).forEach(function(t){t in e&&(f[t]=e[t])}));var p=f.type;switch(r&&(l.target=this),f.eventPhase){default:case i.NONE:if(l.eventPhase=i.AT_TARGET,this.invokeCurrentListeners(this._earlyListeners,f,p),!this.__getParent)return l.eventPhase=i.AT_TARGET,this._dispatchEvent(f,!1);for(var d=this,h=this;d.__getParent&&null!==(d=d.__getParent());)l._children||(l._children=[]),l._children.push(h),h=d;return h._defaultSync=c._defaultSync,l.eventPhase=i.CAPTURING_PHASE,h._dispatchEvent(f,!1);case i.CAPTURING_PHASE:if(l._stopPropagation)return u();this.invokeCurrentListeners(this._listeners,f,p);var y=l._children&&l._children.length&&l._children.pop();return y&&y!==f.target||(l.eventPhase=i.AT_TARGET),y&&(y._defaultSync=c._defaultSync),(y||this)._dispatchEvent(f,!1);case i.AT_TARGET:return l._stopPropagation?u():(this.invokeCurrentListeners(this._listeners,f,p,!0),l.bubbles?(l.eventPhase=i.BUBBLING_PHASE,this._dispatchEvent(f,!1)):u());case i.BUBBLING_PHASE:if(l._stopPropagation)return u();var _=this.__getParent&&this.__getParent();return _?(_.invokeCurrentListeners(_._listeners,f,p,!0),_._defaultSync=c._defaultSync,_._dispatchEvent(f,!1)):u()}},invokeCurrentListeners:function(e,t,n,o){var a=s.get(t),u=this;a.currentTarget=this;var c=r(e,n,{}),l=c.listenersByType.concat(),f=l.length?1:0;return l.some(function(e,r){var s=o?u["on"+n]:null;if(a._stopImmediatePropagation)return!0;r===f&&"function"==typeof s&&this.tryCatch(function(){var e=s.call(t.currentTarget,t);e===!1&&t.preventDefault()});var c=e.options,l=c.once,p=c.passive,d=c.capture;if(a._passive=p,d&&t.target!==t.currentTarget&&t.eventPhase===i.CAPTURING_PHASE||t.eventPhase===i.AT_TARGET||!d&&t.target!==t.currentTarget&&t.eventPhase===i.BUBBLING_PHASE){var h=e.listener;this.tryCatch(function(){h.call(t.currentTarget,t)}),l&&this.removeEventListener(n,h,c)}},this),this.tryCatch(function(){var e=o?u["on"+n]:null;if("function"==typeof e&&l.length<2){var r=e.call(t.currentTarget,t);r===!1&&t.preventDefault()}}),!t.defaultPrevented},tryCatch:function(e){try{e()}catch(e){this.triggerErrorEvent(e)}},triggerErrorEvent:function(e){var t=e;"string"==typeof e?t=new Error("Uncaught exception: "+e):t.message="Uncaught exception: "+e.message;var n;n="undefined"==typeof window||"undefined"==typeof ErrorEvent||window&&"object"==typeof window&&!window.dispatchEvent?function(){setTimeout(function(){throw t})}:function(){var n=new ErrorEvent("error",{error:e,message:t.message||"",filename:t.fileName||"",lineno:t.lineNumber||0,colno:t.columnNumber||0});window.dispatchEvent(n)},this.__userErrorEventHandler?this.__userErrorEventHandler(t,n):n()}}),o.EventPolyfill=u,o.CustomEventPolyfill=c,o.DOMException=t,"undefined"!=typeof e&&e.exports?e.exports=o:window.EventTarget=o}()}),EventTarget$1=interopDefault(EventTarget),map={},CFG={},test$5=void 0,useNativeDOMException=!1;try{test$5=createNativeDOMException("test name","test message"),isErrorOrDOMErrorOrDOMException(test$5)&&"test name"===test$5.name&&"test message"===test$5.message&&(useNativeDOMException=!0)}catch(e){}var createDOMException=void 0,DOMException$1=void 0;useNativeDOMException?(DOMException$1=DOMException,createDOMException=function(e,t,n){return logError(e,t,n),createNativeDOMException(e,t)}):(DOMException$1=Error,createDOMException=function(e,t,n){return logError(e,t,n),createError(e,t)});var _typeof$1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cleanInterface=!1,testObject={test:!0};if(Object.defineProperty)try{Object.defineProperty(testObject,"test",{enumerable:!1}),testObject.test&&(cleanInterface=!0)}catch(e){}var StringList=function(){this.length=0,this._items=[],cleanInterface&&Object.defineProperties(this,{_items:{enumerable:!1},length:{enumerable:!1}})};if(StringList.prototype={contains:function(e){return this._items.includes(e)},item:function(e){return this._items[e]},addIndexes:function(){for(var e=0;e<this._items.length;e++)this[e]=this._items[e]},sortList:function(){return this._items.sort(),this.addIndexes(),this._items},forEach:function(e,t){this._items.forEach(e,t)},map:function(e,t){return this._items.map(e,t)},indexOf:function(e){return this._items.indexOf(e)},push:function(e){this._items.push(e),this.length++,this.sortList()},splice:function(){var e;(e=this._items).splice.apply(e,arguments),this.length=this._items.length;for(var t in this)t===String(parseInt(t,10))&&delete this[t];this.sortList()}},cleanInterface)for(var i in{addIndexes:!1,sortList:!1,forEach:!1,map:!1,indexOf:!1,push:!1,splice:!1})Object.defineProperty(StringList.prototype,i,{enumerable:!1});var HexDigit="[0-9a-fA-F]",HexDigits="0*(?:"+HexDigit+"{1,5}|10"+HexDigit+"{4})*",UnicodeEscapeSequence="(?:u"+HexDigit+"{4}|u{"+HexDigits+"})",ShimEvent=EventTarget$1.EventPolyfill;IDBVersionChangeEvent.prototype=new ShimEvent("bogus"),IDBVersionChangeEvent.prototype.constructor=IDBVersionChangeEvent,IDBVersionChangeEvent.prototype.toString=function(){return"[object IDBVersionChangeEvent]"},Object.defineProperty(IDBVersionChangeEvent,Symbol.hasInstance,{value:function(e){return isObj(e)&&"oldVersion"in e&&"boolean"==typeof e.defaultPrevented}}),Object.defineProperty(ShimEvent,Symbol.hasInstance,{value:function(e){return isObj(e)&&"target"in e&&"boolean"==typeof e.bubbles}});var _createClass$1=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),IDBRequest=function(){function e(){_classCallCheck$1(this,e),this.onsuccess=this.onerror=null,this.__result=void 0,this.__error=this.__source=this.__transaction=null,this.__readyState="pending",this.__setOptions({extraProperties:["debug"]})}return _createClass$1(e,[{key:"toString",value:function(){return"[object IDBRequest]"}},{key:"__getParent",value:function(){return"[object IDBOpenDBRequest]"===this.toString()?null:this.__transaction}}]),e}();defineReadonlyProperties(IDBRequest.prototype,["source","transaction","readyState"]),["result","error"].forEach(function(e){var t=IDBRequest.prototype;Object.defineProperty(t,"__"+e,{enumerable:!1,configurable:!1,writable:!0}),Object.defineProperty(t,e,{enumerable:!0,configurable:!0,get:function(){if("done"!==this.__readyState)throw createDOMException("InvalidStateError","The request is still pending.");return this["__"+e]}})}),Object.assign(IDBRequest.prototype,EventTarget$1.prototype);var IDBOpenDBRequest=function(e){function t(){_classCallCheck$1(this,t);var e=_possibleConstructorReturn$1(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.__setOptions({extraProperties:["oldVersion","newVersion","debug"]}),e.onblocked=e.onupgradeneeded=null,e}return _inherits$1(t,e),_createClass$1(t,[{key:"toString",value:function(){return"[object IDBOpenDBRequest]"}}]),t}(IDBRequest),_typeof$3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Key={},collations=["undefined","number","date","string","array"],signValues=["negativeInfinity","bigNegative","smallNegative","smallPositive","bigPositive","positiveInfinity"],types={undefined:{encode:function(e){return collations.indexOf("undefined")+"-"},decode:function(e){}},number:{encode:function(e){var t=Math.abs(e).toString(32),n=t.indexOf(".");t=n!==-1?t.replace(".",""):t;var r=t.search(/[^0]/);t=t.slice(r);var o=void 0,i=zeros(2),a=zeros(11);return isFinite(e)?e<0?e>-1?(o=signValues.indexOf("smallNegative"),i=padBase32Exponent(r),a=flipBase32(padBase32Mantissa(t))):(o=signValues.indexOf("bigNegative"),i=flipBase32(padBase32Exponent(n!==-1?n:t.length)),a=flipBase32(padBase32Mantissa(t))):e<1?(o=signValues.indexOf("smallPositive"),i=flipBase32(padBase32Exponent(r)),a=padBase32Mantissa(t)):(o=signValues.indexOf("bigPositive"),i=padBase32Exponent(n!==-1?n:t.length),a=padBase32Mantissa(t)):o=signValues.indexOf(e>0?"positiveInfinity":"negativeInfinity"),collations.indexOf("number")+"-"+o+i+a},decode:function(e){var t=+e.substr(2,1),n=e.substr(3,2),r=e.substr(5,11);switch(signValues[t]){case"negativeInfinity":return-(1/0);case"positiveInfinity":return 1/0;case"bigPositive":return pow32(r,n);case"smallPositive":return n=negate(flipBase32(n)),pow32(r,n);case"smallNegative":return n=negate(n),r=flipBase32(r),-pow32(r,n);case"bigNegative":return n=flipBase32(n),r=flipBase32(r),-pow32(r,n);default:throw new Error("Invalid number.")}}},string:{encode:function(e,t){return t&&(e=e.replace(/(.)/g,"-$1")+" "),collations.indexOf("string")+"-"+e},decode:function(e,t){return e=e.slice(2),t&&(e=e.substr(0,e.length-1).replace(/-(.)/g,"$1")),e}},array:{encode:function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n],o=_encode(r,!0);t[n]=o}return t.push(collations.indexOf("undefined")+"-"),collations.indexOf("array")+"-"+JSON.stringify(t)},decode:function(e){var t=JSON.parse(e.slice(2));t.pop();for(var n=0;n<t.length;n++){var r=t[n],o=_decode(r,!0);t[n]=o}return t}},date:{encode:function(e){return collations.indexOf("date")+"-"+e.toJSON()},decode:function(e){return new Date(e.slice(2))}}};Key={encode:_encode,decode:_decode,convertValueToKey:convertValueToKey,convertValueToKeyMultiEntry:convertValueToKeyMultiEntry,extractKeyFromValueUsingKeyPath:extractKeyFromValueUsingKeyPath,evaluateKeyPathOnValue:evaluateKeyPathOnValue,setValue:setValue,isMultiEntryMatch:isMultiEntryMatch,isKeyInRange:isKeyInRange,findMultiEntryMatches:findMultiEntryMatches},IDBKeyRange.prototype.includes=function(e){return Key.convertValueToKey(e),Key.isKeyInRange(e,this)},IDBKeyRange.only=function(e){return new IDBKeyRange(e,e,!1,!1)},IDBKeyRange.lowerBound=function(e,t){return new IDBKeyRange(e,void 0,t,!0)},IDBKeyRange.upperBound=function(e,t){return new IDBKeyRange(void 0,e,!0,t)},IDBKeyRange.bound=function(e,t,n,r){return new IDBKeyRange(e,t,n,r)},IDBKeyRange.prototype.toString=function(){return"[object IDBKeyRange]"},defineReadonlyProperties(IDBKeyRange.prototype,["lower","upper","lowerOpen","upperOpen"]),Object.defineProperty(IDBKeyRange,Symbol.hasInstance,{value:function(e){return isObj(e)&&"upper"in e&&"boolean"==typeof e.lowerOpen}});var nodeAtob=createCommonjsModule(function(e){"use strict";function t(e){return new Buffer(e,"base64").toString("binary")}e.exports=t.atob=t}),atob=interopDefault(nodeAtob),b64=createCommonjsModule(function(e,t){"use strict";function n(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,n=e.length;t<n;++t)s[t]=e[t],u[e.charCodeAt(t)]=t;u["-".charCodeAt(0)]=62,u["_".charCodeAt(0)]=63}function r(e){var t,n,r,o,i,a,s=e.length;if(s%4>0)throw new Error("Invalid string. Length must be a multiple of 4");i="="===e[s-2]?2:"="===e[s-1]?1:0,a=new c(3*s/4-i),r=i>0?s-4:s;var l=0;for(t=0,n=0;t<r;t+=4,n+=3)o=u[e.charCodeAt(t)]<<18|u[e.charCodeAt(t+1)]<<12|u[e.charCodeAt(t+2)]<<6|u[e.charCodeAt(t+3)],a[l++]=o>>16&255,a[l++]=o>>8&255,a[l++]=255&o;return 2===i?(o=u[e.charCodeAt(t)]<<2|u[e.charCodeAt(t+1)]>>4,a[l++]=255&o):1===i&&(o=u[e.charCodeAt(t)]<<10|u[e.charCodeAt(t+1)]<<4|u[e.charCodeAt(t+2)]>>2,a[l++]=o>>8&255,a[l++]=255&o),a}function o(e){return s[e>>18&63]+s[e>>12&63]+s[e>>6&63]+s[63&e]}function i(e,t,n){for(var r,i=[],a=t;a<n;a+=3)r=(e[a]<<16)+(e[a+1]<<8)+e[a+2],i.push(o(r));return i.join("")}function a(e){for(var t,n=e.length,r=n%3,o="",a=[],u=16383,c=0,l=n-r;c<l;c+=u)a.push(i(e,c,c+u>l?l:c+u));return 1===r?(t=e[n-1],o+=s[t>>2],o+=s[t<<4&63],o+="=="):2===r&&(t=(e[n-2]<<8)+e[n-1],o+=s[t>>10],o+=s[t>>4&63],o+=s[t<<2&63],o+="="),a.push(o),a.join("")}t.toByteArray=r,t.fromByteArray=a;var s=[],u=[],c="undefined"!=typeof Uint8Array?Uint8Array:Array;n()}),b64$1=interopDefault(b64),fromByteArray=b64.fromByteArray,toByteArray=b64.toByteArray,require$$1$2=Object.freeze({default:b64$1,fromByteArray:fromByteArray,toByteArray:toByteArray}),index$12=createCommonjsModule(function(e,t){t.read=function(e,t,n,r,o){var i,a,s=8*o-r-1,u=(1<<s)-1,c=u>>1,l=-7,f=n?o-1:0,p=n?-1:1,d=e[t+f];for(f+=p,i=d&(1<<-l)-1,d>>=-l,l+=s;l>0;i=256*i+e[t+f],f+=p,l-=8);for(a=i&(1<<-l)-1,i>>=-l,l+=r;l>0;a=256*a+e[t+f],f+=p,l-=8);if(0===i)i=1-c;else{if(i===u)return a?NaN:(d?-1:1)*(1/0);a+=Math.pow(2,r),i-=c}return(d?-1:1)*a*Math.pow(2,i-r)},t.write=function(e,t,n,r,o,i){var a,s,u,c=8*i-o-1,l=(1<<c)-1,f=l>>1,p=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:i-1,h=r?1:-1,y=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=l):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),t+=a+f>=1?p/u:p*Math.pow(2,1-f),t*u>=2&&(a++,u/=2),a+f>=l?(s=0,a=l):a+f>=1?(s=(t*u-1)*Math.pow(2,o),a+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,o),a=0));o>=8;e[n+d]=255&s,d+=h,s/=256,o-=8);for(a=a<<o|s,c+=o;c>0;e[n+d]=255&a,d+=h,a/=256,c-=8);e[n+d-h]|=128*y}}),index$13=interopDefault(index$12),write=index$12.write,read=index$12.read,require$$0$6=Object.freeze({default:index$13,write:write,read:read}),index$10=createCommonjsModule(function(e,t){"use strict";function n(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(e){return!1}}function r(e){if(e>H)throw new RangeError("Invalid typed array length");var t=new Uint8Array(e);return t.__proto__=o.prototype,t}function o(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return u(e)}return i(e,t,n)}function i(e,t,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?f(e,t,n):"string"==typeof e?c(e,t):p(e)}function a(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function s(e,t,n){return a(e),e<=0?r(e):void 0!==t?"string"==typeof n?r(e).fill(t,n):r(e).fill(t):r(e)}function u(e){return a(e),r(e<0?0:0|d(e))}function c(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!o.isEncoding(t))throw new TypeError('"encoding" must be a valid string encoding');var n=0|y(e,t),i=r(n),a=i.write(e,t);return a!==n&&(i=i.slice(0,a)),i}function l(e){for(var t=e.length<0?0:0|d(e.length),n=r(t),o=0;o<t;o+=1)n[o]=255&e[o];return n}function f(e,t,n){if(e.byteLength,t<0||e.byteLength<t)throw new RangeError("'offset' is out of bounds");if(e.byteLength<t+(n||0))throw new RangeError("'length' is out of bounds");var r;return r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),r.__proto__=o.prototype,r}function p(e){if(o.isBuffer(e)){var t=0|d(e.length),n=r(t);return 0===n.length?n:(e.copy(n,0,0,t),n)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||W(e.length)?r(0):l(e);if("Buffer"===e.type&&Array.isArray(e.data))return l(e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function d(e){if(e>=H)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+H.toString(16)+" bytes");return 0|e}function h(e){return+e!=e&&(e=0),o.alloc(+e)}function y(e,t){if(o.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return L(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return G(e).length;default:if(r)return L(e).length;t=(""+t).toLowerCase(),r=!0}}function _(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,t>>>=0,n<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return A(this,t,n);case"utf8":case"utf-8":return S(this,t,n);case"ascii":return O(this,t,n);case"latin1":case"binary":return C(this,t,n);case"base64":return x(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return $(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function v(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function m(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=o.from(t,r)),o.isBuffer(t))return 0===t.length?-1:g(e,t,n,r,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):g(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function g(e,t,n,r,o){function i(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}var a=1,s=e.length,u=t.length;if(void 0!==r&&(r=String(r).toLowerCase(),"ucs2"===r||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,u/=2,n/=2}var c;if(o){var l=-1;for(c=n;c<s;c++)if(i(e,c)===i(t,l===-1?0:c-l)){
if(l===-1&&(l=c),c-l+1===u)return l*a}else l!==-1&&(c-=c-l),l=-1}else for(n+u>s&&(n=s-u),c=n;c>=0;c--){for(var f=!0,p=0;p<u;p++)if(i(e,c+p)!==i(t,p)){f=!1;break}if(f)return c}return-1}function b(e,t,n,r){n=Number(n)||0;var o=e.length-n;r?(r=Number(r),r>o&&(r=o)):r=o;var i=t.length;if(i%2!==0)throw new TypeError("Invalid hex string");r>i/2&&(r=i/2);for(var a=0;a<r;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[n+a]=s}return a}function E(e,t,n,r){return V(L(t,e.length-n),e,n,r)}function D(e,t,n,r){return V(F(t),e,n,r)}function w(e,t,n,r){return D(e,t,n,r)}function I(e,t,n,r){return V(G(t),e,n,r)}function B(e,t,n,r){return V(U(t,e.length-n),e,n,r)}function x(e,t,n){return 0===t&&n===e.length?z.fromByteArray(e):z.fromByteArray(e.slice(t,n))}function S(e,t,n){n=Math.min(e.length,n);for(var r=[],o=t;o<n;){var i=e[o],a=null,s=i>239?4:i>223?3:i>191?2:1;if(o+s<=n){var u,c,l,f;switch(s){case 1:i<128&&(a=i);break;case 2:u=e[o+1],128===(192&u)&&(f=(31&i)<<6|63&u,f>127&&(a=f));break;case 3:u=e[o+1],c=e[o+2],128===(192&u)&&128===(192&c)&&(f=(15&i)<<12|(63&u)<<6|63&c,f>2047&&(f<55296||f>57343)&&(a=f));break;case 4:u=e[o+1],c=e[o+2],l=e[o+3],128===(192&u)&&128===(192&c)&&128===(192&l)&&(f=(15&i)<<18|(63&u)<<12|(63&c)<<6|63&l,f>65535&&f<1114112&&(a=f))}}null===a?(a=65533,s=1):a>65535&&(a-=65536,r.push(a>>>10&1023|55296),a=56320|1023&a),r.push(a),o+=s}return T(r)}function T(e){var t=e.length;if(t<=Y)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=Y));return n}function O(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(127&e[o]);return r}function C(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(e[o]);return r}function A(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var o="",i=t;i<n;++i)o+=k(e[i]);return o}function $(e,t,n){for(var r=e.slice(t,n),o="",i=0;i<r.length;i+=2)o+=String.fromCharCode(r[i]+256*r[i+1]);return o}function j(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function P(e,t,n,r,i,a){if(!o.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function K(e,t,n,r,o,i){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function R(e,t,n,r,o){return t=+t,n>>>=0,o||K(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),Q.write(e,t,n,r,23,4),n+4}function N(e,t,n,r,o){return t=+t,n>>>=0,o||K(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),Q.write(e,t,n,r,52,8),n+8}function q(e){if(e=M(e).replace(J,""),e.length<2)return"";for(;e.length%4!==0;)e+="=";return e}function M(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function k(e){return e<16?"0"+e.toString(16):e.toString(16)}function L(e,t){t=t||1/0;for(var n,r=e.length,o=null,i=[],a=0;a<r;++a){if(n=e.charCodeAt(a),n>55295&&n<57344){if(!o){if(n>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&i.push(239,191,189);continue}o=n;continue}if(n<56320){(t-=3)>-1&&i.push(239,191,189),o=n;continue}n=(o-55296<<10|n-56320)+65536}else o&&(t-=3)>-1&&i.push(239,191,189);if(o=null,n<128){if((t-=1)<0)break;i.push(n)}else if(n<2048){if((t-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function F(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function U(e,t){for(var n,r,o,i=[],a=0;a<e.length&&!((t-=2)<0);++a)n=e.charCodeAt(a),r=n>>8,o=n%256,i.push(o),i.push(r);return i}function G(e){return z.toByteArray(q(e))}function V(e,t,n,r){for(var o=0;o<r&&!(o+n>=t.length||o>=e.length);++o)t[o+n]=e[o];return o}function W(e){return e!==e}var z=interopDefault(require$$1$2),Q=interopDefault(require$$0$6);t.Buffer=o,t.SlowBuffer=h,t.INSPECT_MAX_BYTES=50;var H=2147483647;t.kMaxLength=H,o.TYPED_ARRAY_SUPPORT=n(),o.TYPED_ARRAY_SUPPORT||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),"undefined"!=typeof Symbol&&Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),o.poolSize=8192,o.from=function(e,t,n){return i(e,t,n)},o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,o.alloc=function(e,t,n){return s(e,t,n)},o.allocUnsafe=function(e){return u(e)},o.allocUnsafeSlow=function(e){return u(e)},o.isBuffer=function(e){return!(null==e||!e._isBuffer)},o.compare=function(e,t){if(!o.isBuffer(e)||!o.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,a=Math.min(n,r);i<a;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},o.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return o.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=o.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var a=e[n];if(!o.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,i),i+=a.length}return r},o.byteLength=y,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)v(this,t,t+1);return this},o.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)v(this,t,t+3),v(this,t+1,t+2);return this},o.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)v(this,t,t+7),v(this,t+1,t+6),v(this,t+2,t+5),v(this,t+3,t+4);return this},o.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?S(this,0,e):_.apply(this,arguments)},o.prototype.equals=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===o.compare(this,e)},o.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},o.prototype.compare=function(e,t,n,r,i){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,i>>>=0,this===e)return 0;for(var a=i-r,s=n-t,u=Math.min(a,s),c=this.slice(r,i),l=e.slice(t,n),f=0;f<u;++f)if(c[f]!==l[f]){a=c[f],s=l[f];break}return a<s?-1:s<a?1:0},o.prototype.includes=function(e,t,n){return this.indexOf(e,t,n)!==-1},o.prototype.indexOf=function(e,t,n){return m(this,e,t,n,!0)},o.prototype.lastIndexOf=function(e,t,n){return m(this,e,t,n,!1)},o.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var o=this.length-t;if((void 0===n||n>o)&&(n=o),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var i=!1;;)switch(r){case"hex":return b(this,e,t,n);case"utf8":case"utf-8":return E(this,e,t,n);case"ascii":return D(this,e,t,n);case"latin1":case"binary":return w(this,e,t,n);case"base64":return I(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,e,t,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Y=4096;o.prototype.slice=function(e,t){var n=this.length;e=~~e,t=void 0===t?n:~~t,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),t<e&&(t=e);var r=this.subarray(e,t);return r.__proto__=o.prototype,r},o.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||j(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return r},o.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||j(e,t,this.length);for(var r=this[e+--t],o=1;t>0&&(o*=256);)r+=this[e+--t]*o;return r},o.prototype.readUInt8=function(e,t){return e>>>=0,t||j(e,1,this.length),this[e]},o.prototype.readUInt16LE=function(e,t){return e>>>=0,t||j(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUInt16BE=function(e,t){return e>>>=0,t||j(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUInt32LE=function(e,t){return e>>>=0,t||j(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},o.prototype.readUInt32BE=function(e,t){return e>>>=0,t||j(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||j(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return o*=128,r>=o&&(r-=Math.pow(2,8*t)),r},o.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||j(e,t,this.length);for(var r=t,o=1,i=this[e+--r];r>0&&(o*=256);)i+=this[e+--r]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*t)),i},o.prototype.readInt8=function(e,t){return e>>>=0,t||j(e,1,this.length),128&this[e]?(255-this[e]+1)*-1:this[e]},o.prototype.readInt16LE=function(e,t){e>>>=0,t||j(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt16BE=function(e,t){e>>>=0,t||j(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt32LE=function(e,t){return e>>>=0,t||j(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return e>>>=0,t||j(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readFloatLE=function(e,t){return e>>>=0,t||j(e,4,this.length),Q.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return e>>>=0,t||j(e,4,this.length),Q.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return e>>>=0,t||j(e,8,this.length),Q.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return e>>>=0,t||j(e,8,this.length),Q.read(this,e,!1,52,8)},o.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){var o=Math.pow(2,8*n)-1;P(this,e,t,n,o,0)}var i=1,a=0;for(this[t]=255&e;++a<n&&(i*=256);)this[t+a]=e/i&255;return t+n},o.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){var o=Math.pow(2,8*n)-1;P(this,e,t,n,o,0)}var i=n-1,a=1;for(this[t+i]=255&e;--i>=0&&(a*=256);)this[t+i]=e/a&255;return t+n},o.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,1,255,0),this[t]=255&e,t+1},o.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},o.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},o.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},o.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},o.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var o=Math.pow(2,8*n-1);P(this,e,t,n,o-1,-o)}var i=0,a=1,s=0;for(this[t]=255&e;++i<n&&(a*=256);)e<0&&0===s&&0!==this[t+i-1]&&(s=1),this[t+i]=(e/a>>0)-s&255;return t+n},o.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var o=Math.pow(2,8*n-1);P(this,e,t,n,o-1,-o)}var i=n-1,a=1,s=0;for(this[t+i]=255&e;--i>=0&&(a*=256);)e<0&&0===s&&0!==this[t+i+1]&&(s=1),this[t+i]=(e/a>>0)-s&255;return t+n},o.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},o.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},o.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},o.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},o.prototype.writeFloatLE=function(e,t,n){return R(this,e,t,!0,n)},o.prototype.writeFloatBE=function(e,t,n){return R(this,e,t,!1,n)},o.prototype.writeDoubleLE=function(e,t,n){return N(this,e,t,!0,n)},o.prototype.writeDoubleBE=function(e,t,n){return N(this,e,t,!1,n)},o.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var o,i=r-n;if(this===e&&n<t&&t<r)for(o=i-1;o>=0;--o)e[o+t]=this[o+n];else if(i<1e3)for(o=0;o<i;++o)e[o+t]=this[o+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+i),t);return i},o.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!o.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0);var a;if("number"==typeof e)for(a=t;a<n;++a)this[a]=e;else{var s=o.isBuffer(e)?e:new o(e,r),u=s.length;for(a=0;a<n-t;++a)this[a+t]=s[a%u]}return this};var J=/[^+\/0-9A-Za-z-_]/g}),index$11=interopDefault(index$10),kMaxLength=index$10.kMaxLength,INSPECT_MAX_BYTES=index$10.INSPECT_MAX_BYTES,SlowBuffer=index$10.SlowBuffer,Buffer$1=index$10.Buffer,require$$0$5=Object.freeze({default:index$11,kMaxLength:kMaxLength,INSPECT_MAX_BYTES:INSPECT_MAX_BYTES,SlowBuffer:SlowBuffer,Buffer:Buffer$1}),index$9=createCommonjsModule(function(e){function t(e,t){t=t||{},this.type=t.type||"";for(var o=0,i=0,a=e.length;i<a;++i)o+="string"==typeof e[i]?n.byteLength(e[i]):r(e[i]).indexOf("ArrayBuffer")>-1?e[i].byteLength:e[i].buffer?e[i].buffer.byteLength:e[i].length;this.size=o}e.exports=t;var n=interopDefault(require$$0$5).Buffer,r={}.toString.call.bind({}.toString),o=t,i=o.prototype;i.slice=function(e,n){var r=new t([],{type:this.type});return r.size=(n||this.size)-(e||0),r}}),Blob=interopDefault(index$9),_typeof$6="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sca={decycle:decycle,retrocycle:retrocycle,encode:encode,decode:decode};IDBIndex.__clone=function(e,t){return new IDBIndex(t,{columnName:e.name,keyPath:e.keyPath,optionalParams:{multiEntry:e.multiEntry,unique:e.unique}})},IDBIndex.__createIndex=function(e,t){var n=!!e.__indexes[t.name]&&e.__indexes[t.name].__deleted;t.__pending=!0,e.__indexes[t.name]=t,e.indexNames.push(t.name);var r=e.transaction;r.__addNonRequestToTransactionQueue(function(r,o,i,a){function s(e,n){a(createDOMException(0,'Could not create index "'+t.name+'"',n))}function u(n){IDBIndex.__updateIndexList(e,n,function(){n.executeSql("SELECT * FROM "+escapeStore(e.name),[],function(n,r){function o(a){if(a<r.rows.length)try{var u=Sca.decode(r.rows.item(a).value),c=Key.evaluateKeyPathOnValue(u,t.keyPath,t.multiEntry);c=Key.encode(c,t.multiEntry),n.executeSql("UPDATE "+escapeStore(e.name)+" SET "+escapeIndex(t.name)+" = ? WHERE key = ?",[c,r.rows.item(a).key],function(e,t){o(a+1)},s)}catch(e){o(a+1)}else delete t.__pending,i(e)}CFG.DEBUG&&console.log("Adding existing "+e.name+" records to the "+t.name+" index"),o(0)},s)},s)}if(n)u(r);else{var c=["ALTER TABLE",escapeStore(e.name),"ADD",escapeIndex(t.name),"BLOB"].join(" ");CFG.DEBUG&&console.log(c),r.executeSql(c,[],u,s)}},void 0,e)},IDBIndex.__deleteIndex=function(e,t){e.__indexes[t.name].__deleted=!0,e.indexNames.splice(e.indexNames.indexOf(t.name),1);var n=e.transaction;n.__addNonRequestToTransactionQueue(function(n,r,o,i){function a(e,n){i(createDOMException(0,'Could not delete index "'+t.name+'"',n))}IDBIndex.__updateIndexList(e,n,o,a)},void 0,e)},IDBIndex.__updateIndexList=function(e,t,n,r){for(var o={},i=0;i<e.indexNames.length;i++){var a=e.__indexes[e.indexNames[i]];o[a.name]={columnName:a.name,keyPath:a.keyPath,optionalParams:{unique:a.unique,multiEntry:a.multiEntry},deleted:!!a.deleted}}CFG.DEBUG&&console.log("Updating the index list for "+e.name,o),t.executeSql("UPDATE __sys__ SET indexList = ? WHERE name = ?",[JSON.stringify(o),e.name],function(){n(e)},r)},IDBIndex.prototype.__fetchIndexData=function(e,t,n,r){var o=this,i=r&&null==e;if(this.__deleted)throw createDOMException("InvalidStateError","This index has been deleted");if(this.objectStore.__deleted)throw createDOMException("InvalidStateError","This index's object store has been deleted");if(IDBTransaction.__assertActive(this.objectStore.transaction),n&&!r&&null==e)throw createDOMException("DataError","No key or range was specified");var a=fetchIndexData(o,!i,e,t,!1);return o.objectStore.transaction.__addToTransactionQueue(function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];executeFetchIndexData.apply(void 0,_toConsumableArray$1(a).concat(t))},void 0,o)},IDBIndex.prototype.openCursor=function(e,t){var n=new IDBCursorWithValue(e,t,this.objectStore,this,escapeIndexName(this.name),"value");return this.__objectStore.__cursors.push(n),n.__req},IDBIndex.prototype.openKeyCursor=function(e,t){var n=new IDBCursor(e,t,this.objectStore,this,escapeIndexName(this.name),"key");return this.__objectStore.__cursors.push(n),n.__req},IDBIndex.prototype.get=function(e){if(!arguments.length)throw new TypeError("A parameter was missing for `IDBIndex.get`.");return this.__fetchIndexData(e,"value",!0)},IDBIndex.prototype.getKey=function(e){if(!arguments.length)throw new TypeError("A parameter was missing for `IDBIndex.getKey`.");return this.__fetchIndexData(e,"key",!0)},IDBIndex.prototype.count=function(e){return instanceOf(e,IDBKeyRange)?("[object IDBKeyRange]"!==!e.toString()&&(e=new IDBKeyRange(e.lower,e.upper,e.lowerOpen,e.upperOpen)),new IDBCursorWithValue(e,"next",this.objectStore,this,escapeIndexName(this.name),"value",!0).__req):this.__fetchIndexData(e,"count",!1,!0)},IDBIndex.prototype.__renameIndex=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o="BLOB",i=r.map(function(e){return e[0]}),a=r.map(function(e){return e.join(" ")}),s=a.length?a.join(", ")+", ":"",u=i.length?i.join(", ")+", ":"",c=this;c.transaction.__addNonRequestToTransactionQueue(function(r,i,a,c){var l="ALTER TABLE "+escapeStore(e)+" RENAME TO tmp_"+escapeStore(e);r.executeSql(l,[],function(r,i){var l="CREATE TABLE "+escapeStore(e)+"("+s+escapeIndex(n)+" "+o+")";r.executeSql(l,[],function(r,o){var i="INSERT INTO "+escapeStore(e)+"("+u+escapeIndex(n)+") SELECT "+u+escapeIndex(t)+" FROM tmp_"+escapeStore(e);r.executeSql(i,[],function(t,n){var r="DROP TABLE tmp_"+escapeStore(e);t.executeSql(r,[],function(e,t){a()},function(e,t){c(t)})},function(e,t){c(t)})})},function(e,t){c(t)})})},IDBIndex.prototype.toString=function(){return"[object IDBIndex]"},defineReadonlyProperties(IDBIndex.prototype,["objectStore","keyPath","multiEntry","unique"]),Object.defineProperty(IDBIndex,Symbol.hasInstance,{value:function(e){return isObj(e)&&"function"==typeof e.openCursor&&"boolean"==typeof e.multiEntry}}),Object.defineProperty(IDBIndex.prototype,"name",{enumerable:!1,configurable:!1,get:function(){return this.__name},set:function(e){var t=this,n=t.name;if(IDBTransaction.__assertVersionChange(this.objectStore.transaction),IDBTransaction.__assertActive(this.objectStore.transaction),t.__deleted)throw createDOMException("InvalidStateError","This index has been deleted");if(t.objectStore.__deleted)throw createDOMException("InvalidStateError","This index's object store has been deleted");if(e!==n){if(t.objectStore.__indexes[e]&&!t.objectStore.__indexes[e].__deleted)throw createDOMException("ConstraintError",'Index "'+e+'" already exists on '+t.objectStore.name);t.__name=e;var r=[["key","BLOB "+(t.objectStore.autoIncrement?"UNIQUE, inc INTEGER PRIMARY KEY AUTOINCREMENT":"PRIMARY KEY")],["value","BLOB"]];this.__renameIndex(t.objectStore.name,n,e,r)}}});var syncPromiseCommonjs=createCommonjsModule(function(e){function t(e){return e&&"function"==typeof e.then}function n(e,t){e.then(null,t)}function r(e){function r(e,t){c.v=e,c.s=t,c.c[t].forEach(function(t){t(e)}),c.c[t].length&&(c.c=null)}function s(e){c.c&&(t(e)?n(e.then(s),u):r(e,i))}function u(e){c.c&&(t(e)?n(e.then(u),u):r(e,a))}var c=this;c.v=0,c.s=o,c.c=[[],[]];try{e(s,u)}catch(e){u(e)}}var o=2,i=0,a=1,s=r.prototype;s.then=function(e,t){var n=this;return new r(function(r,o){function s(){try{r(e?e(n.v):n.v)}catch(e){u(e)}}var u="function"==typeof t?t:o;n.s===i?s():n.s===a?u(n.v):(n.c[i].push(s),n.c[a].push(u))})},s.catch=function(e){var t=this;return new r(function(n,r){function o(){try{n(e(t.v))}catch(e){r(e)}}t.s===a?o():t.s===i?n(t.v):(t.c[a].push(o),t.c[i].push(n))})},r.all=function(e){return new r(function(r,o,i){i=e.length;var a=[];return i?void e.forEach(function(s,u){t(s)?n(s.then(function(e){a[u]=e,--i||r(a)}),o):(a[u]=s,--i||r(e))}):void r(a)})},r.race=function(e){var o=!1;return new r(function(r,i){e.some(function(e,a){return t(e)?void n(e.then(function(e){o||(r(e),o=!0)}),i):(r(e),o=!0,!0)})})},r.resolve=function(e){return new r(function(t,n){t(e)})},r.reject=function(e){return new r(function(t,n){n(e)})},e.exports=r}),SyncPromise=interopDefault(syncPromiseCommonjs),_typeof$5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};IDBObjectStore.__clone=function(e,t){var n=new IDBObjectStore({name:e.name,keyPath:Array.isArray(e.keyPath)?e.keyPath.slice():e.keyPath,autoInc:e.autoIncrement,indexList:{},idbdb:e.__idbdb,cursors:e.__cursors},t);return n.__indexes=e.__indexes,n.__indexNames=e.indexNames,n},IDBObjectStore.__createObjectStore=function(e,t){e.__objectStores[t.name]=t,e.objectStoreNames.push(t.name);var n=e.__versionTransaction;IDBTransaction$1.__assertVersionChange(n),n.__addNonRequestToTransactionQueue(function(e,n,r,o){function i(e,n){throw CFG.DEBUG&&console.log(n),createDOMException(0,'Could not create object store "'+t.name+'"',n)}var a=["CREATE TABLE",escapeStore(t.name),"(key BLOB",t.autoIncrement?"UNIQUE, inc INTEGER PRIMARY KEY AUTOINCREMENT":"PRIMARY KEY",", value BLOB)"].join(" ");CFG.DEBUG&&console.log(a),e.executeSql(a,[],function(e,n){e.executeSql("INSERT INTO __sys__ VALUES (?,?,?,?,?)",[t.name,JSON.stringify(t.keyPath),t.autoIncrement,"{}",1],function(){r(t)},i)},i)})},IDBObjectStore.__deleteObjectStore=function(e,t){t.__deleted=!0,e.__objectStores[t.name]=void 0,e.objectStoreNames.splice(e.objectStoreNames.indexOf(t.name),1);var n=e.__versionTransaction;IDBTransaction$1.__assertVersionChange(n),n.__addNonRequestToTransactionQueue(function(e,n,r,o){function i(e,t){CFG.DEBUG&&console.log(t),o(createDOMException(0,"Could not delete ObjectStore",t))}e.executeSql("SELECT * FROM __sys__ WHERE name = ?",[t.name],function(e,n){n.rows.length>0&&e.executeSql("DROP TABLE "+escapeStore(t.name),[],function(){e.executeSql("DELETE FROM __sys__ WHERE name = ?",[t.name],function(){r()},i)},i)})})},IDBObjectStore.prototype.__validateKeyAndValue=function(e,t){if(null!==this.keyPath){if(void 0!==t)throw createDOMException("DataError","The object store uses in-line keys and the key parameter was provided",this);if(throwIfNotClonable(e,"The data to be stored could not be cloned by the internal structured cloning algorithm."),t=Key.evaluateKeyPathOnValue(e,this.keyPath),void 0===t){if(this.autoIncrement){if(!isObj(e))throw createDOMException("DataError","KeyPath was specified, but value was not an object");return}throw createDOMException("DataError","Could not evaluate a key from keyPath")}Key.convertValueToKey(t)}else{if(void 0===t){if(this.autoIncrement)return;throw createDOMException("DataError","The object store uses out-of-line keys and has no key generator and the key parameter was not provided. ",this)}Key.convertValueToKey(t),throwIfNotClonable(e,"The data to be stored could not be cloned by the internal structured cloning algorithm.")}return t},IDBObjectStore.prototype.__deriveKey=function(e,t,n,r,o){function i(t){e.executeSql("SELECT currNum FROM __sys__ WHERE name = ?",[a.name],function(e,n){t(1!==n.rows.length?1:n.rows.item(0).currNum)},function(e,t){o(createDOMException("DataError","Could not get the auto increment value for key",t))})}var a=this,s=n,u=null!==a.keyPath;u&&(s=Key.evaluateKeyPathOnValue(t,a.keyPath)),a.autoIncrement&&void 0===s?i(function(e){if(u)try{Key.setValue(t,a.keyPath,e)}catch(e){o(createDOMException("DataError","Could not assign a generated value to the keyPath",e))}r(e)}):a.autoIncrement&&Number.isFinite(s)&&s>=1?i(function(e){var t=s>=e;r(s,t)}):r(s)},IDBObjectStore.prototype.__insertData=function(e,t,n,r,o,i,a,s){var u=this,c=this,l={},f=c.indexNames.map(function(t){return new SyncPromise(function(r,o){function i(e){void 0!==s&&(l[e.name]=Key.encode(s,e.multiEntry))}var a=c.__indexes[t];if(a.__pending)return void r();var s=void 0;try{s=Key.extractKeyFromValueUsingKeyPath(n,a.keyPath,a.multiEntry)}catch(e){return void r()}a.unique?!function(){var t=a.multiEntry&&Array.isArray(s),n=fetchIndexData(a,!0,s,"key",t);executeFetchIndexData.apply(void 0,_toConsumableArray(n).concat([e,null,function(e){return void 0===e?(i(a),void r()):void o(createDOMException("ConstraintError","Index already contains a record equal to "+(t?"one of the subkeys of":"")+"`indexKey`"))},o]))}():(i(a),r())})});SyncPromise.all(f).then(function(){var n=["INSERT INTO ",escapeStore(u.name),"("],o=[" VALUES ("],f=[];void 0!==r&&(Key.convertValueToKey(r),n.push(quote("key"),","),o.push("?,"),f.push(Key.encode(r)));for(var p in l)n.push(escapeIndex(p)+","),o.push("?,"),f.push(l[p]);n.push(quote("value")+" )"),o.push("?)"),f.push(t);var d=n.join(" ")+o.join(" ");CFG.DEBUG&&console.log("SQL for adding",d,f);var h=function(t){var n=void 0;"function"==typeof t&&(n=t,t=void 0),e.executeSql(d,f,function(e,r){n?n():a(t)},function(e,t){s(createDOMException("ConstraintError",t.message,t))})};Sca.encode(r,function(t){return t=Sca.decode(t),c.autoIncrement?void h(i?function(){var n="UPDATE __sys__ SET currNum = ? WHERE name = ?",r=[Math.floor(t)+1,c.name];CFG.DEBUG&&console.log(n,r),e.executeSql(n,r,function(e,n){a(t)},function(e,t){s(createDOMException("UnknownError","Could not set the auto increment value for key",t))})}:i===!1||!Number.isFinite(t)||t<1?t:function(){var n="UPDATE __sys__ SET currNum = currNum + 1 WHERE name = ?",r=[c.name];CFG.DEBUG&&console.log(n,r),e.executeSql(n,r,function(e,n){a(t)},function(e,t){s(createDOMException("UnknownError","Could not set the auto increment value for key",t))})}):void h(t)})}).catch(function(e){s(e)})},IDBObjectStore.prototype.add=function(e,t){var n=this;if(0===arguments.length)throw new TypeError("No value was specified");if(n.__deleted)throw createDOMException("InvalidStateError","This store has been deleted");IDBTransaction$1.__assertActive(n.transaction),n.transaction.__assertWritable(),this.__validateKeyAndValue(e,t);var r=n.transaction.__createRequest(n);return n.transaction.__pushToQueue(r,function(r,o,i,a){Sca.encode(e,function(o){e=Sca.decode(o),n.__deriveKey(r,e,t,function(o,s){Sca.encode(e,function(u){n.__insertData(r,u,e,o,t,s,function(){n.__cursors.forEach(function(e){e.__addToCache()}),i.apply(void 0,arguments)},a)})},a)})}),r},IDBObjectStore.prototype.put=function(e,t){var n=this;if(0===arguments.length)throw new TypeError("No value was specified");if(n.__deleted)throw createDOMException("InvalidStateError","This store has been deleted");IDBTransaction$1.__assertActive(n.transaction),n.transaction.__assertWritable(),this.__validateKeyAndValue(e,t);var r=n.transaction.__createRequest(n);return n.transaction.__pushToQueue(r,function(r,o,i,a){Sca.encode(e,function(o){e=Sca.decode(o),n.__deriveKey(r,e,t,function(o,s){Sca.encode(e,function(u){Key.convertValueToKey(o);var c="DELETE FROM "+escapeStore(n.name)+" WHERE key = ?",l=Key.encode(o);r.executeSql(c,[l],function(r,c){CFG.DEBUG&&console.log("Did the row with the",o,"exist? ",c.rowsAffected),n.__insertData(r,u,e,o,t,s,function(){n.__cursors.forEach(function(e){e.__addToCache()}),i.apply(void 0,arguments)},a)},function(e,t){a(t)})})},a)})}),r},IDBObjectStore.prototype.get=function(e){var t=this;if(!arguments.length)throw new TypeError("A parameter was missing for `IDBObjectStore.get`.");if(t.__deleted)throw createDOMException("InvalidStateError","This store has been deleted");if(IDBTransaction$1.__assertActive(t.transaction),null==e)throw createDOMException("DataError","No key or range was specified");instanceOf(e,IDBKeyRange)?"[object IDBKeyRange]"!==!e.toString()&&(e=new IDBKeyRange(e.lower,e.upper,e.lowerOpen,e.upperOpen)):e=IDBKeyRange.only(e);var n=["SELECT * FROM ",escapeStore(t.name)," WHERE "],r=[];return setSQLForRange(e,quote("key"),n,r),n=n.join(" "),t.transaction.__addToTransactionQueue(function(e,o,i,a){CFG.DEBUG&&console.log("Fetching",t.name,r),e.executeSql(n,r,function(e,t){CFG.DEBUG&&console.log("Fetched data",t);var n=void 0;try{if(0===t.rows.length)return i();n=Sca.decode(t.rows.item(0).value)}catch(e){CFG.DEBUG&&console.log(e)}i(n)},function(e,t){a(t)})},void 0,t)},IDBObjectStore.prototype.delete=function(e){var t=this;if(!arguments.length)throw new TypeError("A parameter was missing for `IDBObjectStore.delete`.");if(t.__deleted)throw createDOMException("InvalidStateError","This store has been deleted");if(IDBTransaction$1.__assertActive(t.transaction),t.transaction.__assertWritable(),null==e)throw createDOMException("DataError","No key or range was specified");instanceOf(e,IDBKeyRange)?"[object IDBKeyRange]"!==!e.toString()&&(e=new IDBKeyRange(e.lower,e.upper,e.lowerOpen,e.upperOpen)):e=IDBKeyRange.only(e);var n=["DELETE FROM ",escapeStore(t.name)," WHERE "],r=[];setSQLForRange(e,quote("key"),n,r);var o=n.join(" ");return t.transaction.__addToTransactionQueue(function(e,n,i,a){CFG.DEBUG&&console.log("Deleting",t.name,r),e.executeSql(o,r,function(e,n){CFG.DEBUG&&console.log("Deleted from database",n.rowsAffected),t.__cursors.forEach(function(e){e.__deleteFromCache()}),i()},function(e,t){a(t)})},void 0,t)},IDBObjectStore.prototype.clear=function(){var e=this;if(e.__deleted)throw createDOMException("InvalidStateError","This store has been deleted");return IDBTransaction$1.__assertActive(e.transaction),e.transaction.__assertWritable(),e.transaction.__addToTransactionQueue(function(t,n,r,o){t.executeSql("DELETE FROM "+escapeStore(e.name),[],function(t,n){CFG.DEBUG&&console.log("Cleared all records from database",n.rowsAffected),
e.__cursors.forEach(function(e){e.__clearFromCache()}),r()},function(e,t){o(t)})},void 0,e)},IDBObjectStore.prototype.count=function(e){var t=this;if(t.__deleted)throw createDOMException("InvalidStateError","This store has been deleted");if(IDBTransaction$1.__assertActive(t.transaction),instanceOf(e,IDBKeyRange))return"[object IDBKeyRange]"!==!e.toString()&&(e=new IDBKeyRange(e.lower,e.upper,e.lowerOpen,e.upperOpen)),new IDBCursorWithValue(e,"next",this,this,"key","value",!0).__req;var n=function(){var n=null!=e;return n&&Key.convertValueToKey(e),{v:t.transaction.__addToTransactionQueue(function(r,o,i,a){var s="SELECT * FROM "+escapeStore(t.name)+(n?" WHERE key = ?":""),u=[];n&&u.push(Key.encode(e)),r.executeSql(s,u,function(e,t){i(t.rows.length)},function(e,t){a(t)})},void 0,t)}}();return"object"===("undefined"==typeof n?"undefined":_typeof$5(n))?n.v:void 0},IDBObjectStore.prototype.openCursor=function(e,t){if(this.__deleted)throw createDOMException("InvalidStateError","This store has been deleted");var n=new IDBCursorWithValue(e,t,this,this,"key","value");return this.__cursors.push(n),n.__req},IDBObjectStore.prototype.openKeyCursor=function(e,t){if(this.__deleted)throw createDOMException("InvalidStateError","This store has been deleted");var n=new IDBCursor(e,t,this,this,"key","key");return this.__cursors.push(n),n.__req},IDBObjectStore.prototype.index=function(e){if(0===arguments.length)throw new TypeError("No index name was specified");if(this.__deleted)throw createDOMException("InvalidStateError","This store has been deleted");IDBTransaction$1.__assertActive(this.transaction);var t=this.__indexes[e];if(!t||t.__deleted)throw createDOMException("NotFoundError",'Index "'+e+'" does not exist on '+this.name);return IDBIndex.__clone(t,this)},IDBObjectStore.prototype.createIndex=function(e,t,n){if(e=String(e),0===arguments.length)throw new TypeError("No index name was specified");if(1===arguments.length)throw new TypeError("No key path was specified");if(IDBTransaction$1.__assertVersionChange(this.transaction),this.__deleted)throw createDOMException("InvalidStateError","This store has been deleted");if(IDBTransaction$1.__assertActive(this.transaction),this.__indexes[e]&&!this.__indexes[e].__deleted)throw createDOMException("ConstraintError",'Index "'+e+'" already exists on '+this.name);if(!isValidKeyPath(t))throw createDOMException("SyntaxError","A valid keyPath must be supplied");if(Array.isArray(t)&&n&&n.multiEntry)throw createDOMException("InvalidAccessError","The keyPath argument was an array and the multiEntry option is true.");n=n||{};var r={columnName:e,keyPath:t,optionalParams:{unique:!!n.unique,multiEntry:!!n.multiEntry}},o=new IDBIndex(this,r);return IDBIndex.__createIndex(this,o),o},IDBObjectStore.prototype.deleteIndex=function(e){if(0===arguments.length)throw new TypeError("No index name was specified");if(IDBTransaction$1.__assertVersionChange(this.transaction),this.__deleted)throw createDOMException("InvalidStateError","This store has been deleted");IDBTransaction$1.__assertActive(this.transaction);var t=this.__indexes[e];if(!t)throw createDOMException("NotFoundError",'Index "'+e+'" does not exist on '+this.name);IDBIndex.__deleteIndex(this,t)},IDBObjectStore.prototype.toString=function(){return"[object IDBObjectStore]"},defineReadonlyProperties(IDBObjectStore.prototype,["keyPath","indexNames","transaction","autoIncrement"]),Object.defineProperty(IDBObjectStore.prototype,"name",{enumerable:!1,configurable:!1,get:function(){return this.__name},set:function(e){var t=this;if(this.__deleted)throw createDOMException("InvalidStateError","This store has been deleted");if(IDBTransaction$1.__assertVersionChange(this.transaction),IDBTransaction$1.__assertActive(this.transaction),t.name!==e){if(t.__idbdb.__objectStores[e])throw createDOMException("ConstraintError",'Object store "'+e+'" already exists in '+t.__idbdb.name);t.__name=e;var n="ALTER TABLE "+escapeStore(this.name)+" RENAME TO "+escapeStore(e);t.transaction.__addNonRequestToTransactionQueue(function(e,t,r,o){e.executeSql(n,[],function(e,t){r()},function(e,t){o(t)})})}}});var uniqueID=0;IDBTransaction$1.prototype.__executeRequests=function(){function e(){t.__active=!1,CFG.DEBUG&&console.log("Transaction completed");var e=createEvent("complete");t.__transactionFinished=!0;try{t.dispatchEvent(createEvent("__beforecomplete")),t.__internal=!0,t.dispatchEvent(e),t.dispatchEvent(createEvent("__complete"))}catch(e){throw t.__errored=!0,e}finally{t.__storeClones={}}}if(this.__running)return void(CFG.DEBUG&&console.log("Looks like the request set is already running",this.mode));this.__running=!0;var t=this;t.db.__db["readonly"===t.mode?"readTransaction":"transaction"](function(n){function r(e,n){if(n&&(a.req=n),"done"!==a.req.__readyState){a.req.__readyState="done",a.req.__result=e,a.req.__error=null;var r=createEvent("success");try{t.__internal=!0,t.__active=!0,a.req.dispatchEvent(r)}catch(e){return void t.__abortTransaction(createDOMException("AbortError","A request was aborted."))}i()}}function o(){if(!(t.__errored||t.__transactionFinished||a.req&&"done"===a.req.__readyState)){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];var o=findError(n);if(!a.req)return void t.__abortTransaction(a.req.__error);a.req.__readyState="done",a.req.__error=o,a.req.__result=void 0,a.req.addLateEventListener("error",function(e){e.cancelable&&e.defaultPrevented&&i()}),a.req.addDefaultEventListener("error",function(){t.__abortTransaction(a.req.__error)});var s=void 0;try{t.__internal=!0,t.__active=!0,s=createEvent("error",o,{bubbles:!0,cancelable:!0}),a.req.dispatchEvent(s)}catch(e){logError("Error","An error occurred in a handler attached to request chain",e),s.preventDefault(),t.__abortTransaction(createDOMException("AbortError","A request was aborted."))}}}function i(){if(s++,s>=t.__requests.length)t.__requests=[],t.__active&&e();else try{if(a=t.__requests[s],!a.req)return void a.op(n,a.args,i,o);if("done"===a.req.__readyState)return;a.op(n,a.args,r,o,i)}catch(e){o(e)}}t.__tx=n;var a=null,s=-1;i()},function(e){var n=void 0,r=void 0;switch(e.code){case 4:n="QuotaExceededError",r="The operation failed because there was not enough remaining storage space, or the storage quota was reached and the user declined to give more space to the database.";break;default:n="UnknownError",r="The operation failed for reasons unrelated to the database itself and not covered by any other errors."}r+=" ("+e.message+")--("+e.code+")";var o=createDOMException(n,r);t.__abortTransaction(o)})},IDBTransaction$1.prototype.__createRequest=function(e){var t=new IDBRequest;return t.__source=void 0!==e?e:this.db,t.__transaction=this,t},IDBTransaction$1.prototype.__addToTransactionQueue=function(e,t,n){var r=this.__createRequest(n);return this.__pushToQueue(r,e,t),r},IDBTransaction$1.prototype.__addNonRequestToTransactionQueue=function(e,t,n){this.__pushToQueue(null,e,t)},IDBTransaction$1.prototype.__pushToQueue=function(e,t,n){this.__assertActive(),this.__requests.push({op:t,args:n,req:e})},IDBTransaction$1.prototype.__assertActive=function(){if(!this.__active)throw createDOMException("TransactionInactiveError","A request was placed against a transaction which is currently not active, or which is finished")},IDBTransaction$1.prototype.__assertWritable=function(){if("readonly"===this.mode)throw createDOMException("ReadOnlyError","The transaction is read only")},IDBTransaction$1.prototype.__assertVersionChange=function(){IDBTransaction$1.__assertVersionChange(this)},IDBTransaction$1.prototype.objectStore=function(e){if(0===arguments.length)throw new TypeError("No object store name was specified");if(!this.__active)throw createDOMException("InvalidStateError","A request was placed against a transaction which is currently not active, or which is finished");if(this.__objectStoreNames.indexOf(e)===-1)throw createDOMException("NotFoundError",e+" is not participating in this transaction");var t=this.db.__objectStores[e];if(!t)throw createDOMException("NotFoundError",e+" does not exist in "+this.db.name);return this.__storeClones[e]||(this.__storeClones[e]=IDBObjectStore.__clone(t,this)),this.__storeClones[e]},IDBTransaction$1.prototype.__abortTransaction=function(e){function t(t,r){t?"number"==typeof r.code?CFG.DEBUG&&console.log("Rollback erred; feature is probably not supported as per WebSQL",n):CFG.DEBUG&&console.log("Rollback succeeded",n):CFG.DEBUG&&console.log("Rollback not possible due to missing transaction",n),null!==e&&(n.__error=e),logError("Error","An error occurred in a transaction",e),n.__errored||(n.__errored=!0,n.__transactionFinished&&setTimeout(function(){throw e},0),n.__requests.filter(function(e){return e.req&&"done"!==e.req.__readyState}).reduce(function(e,t){return e.then(function(){var e=createEvent("error",null,{bubbles:!0,cancelable:!0});return t.req.__readyState="done",t.req.__result=void 0,t.req.__error=createDOMException("AbortError","A request was aborted."),new Promise(function(n){setTimeout(function(){t.req.dispatchEvent(e),n()},0)})})},Promise.resolve()).then(function(){var t=createEvent("abort",e,{bubbles:!0,cancelable:!1});n.dispatchEvent(t),n.__storeClones={},n.dispatchEvent(createEvent("__abort"))}))}var n=this;n.__active=!1,n.__tx?t(null,{code:0}):t(null,{code:0})},IDBTransaction$1.prototype.abort=function(){var e=this;if(CFG.DEBUG&&console.log("The transaction was aborted",e),!this.__active)throw createDOMException("InvalidStateError","A request was placed against a transaction which is currently not active, or which is finished");e.__abortTransaction(null)},IDBTransaction$1.prototype.toString=function(){return"[object IDBTransaction]"},IDBTransaction$1.__assertVersionChange=function(e){if(!e||"versionchange"!==e.mode)throw createDOMException("InvalidStateError","Not a version transaction")},IDBTransaction$1.__assertNotVersionChange=function(e){if(e&&"versionchange"===e.mode)throw createDOMException("InvalidStateError","Cannot be called during a version transaction")},IDBTransaction$1.__assertActive=function(e){if(!e||!e.__active)throw createDOMException("TransactionInactiveError","A request was placed against a transaction which is currently not active, or which is finished")},IDBTransaction$1.prototype.__getParent=function(){return this.db},IDBTransaction$1.prototype.__userErrorEventHandler=function(e,t){if(this.__internal)throw this.__internal=!1,e;t()},defineReadonlyProperties(IDBTransaction$1.prototype,["objectStoreNames","mode","db","error"]),Object.assign(IDBTransaction$1.prototype,EventTarget$1.prototype),IDBDatabase.prototype.createObjectStore=function(e,t){if(e=String(e),0===arguments.length)throw new TypeError("No object store name was specified");if(IDBTransaction$1.__assertVersionChange(this.__versionTransaction),IDBTransaction$1.__assertActive(this.__versionTransaction),this.__objectStores[e])throw createDOMException("ConstraintError",'Object store "'+e+'" already exists in '+this.name);t=Object.assign({},t),void 0===t.keyPath&&(t.keyPath=null);var n=t.keyPath,r=t.autoIncrement;if(null!==n&&!isValidKeyPath(n))throw createDOMException("SyntaxError","The keyPath argument contains an invalid key path.");if(r&&(""===n||Array.isArray(n)))throw createDOMException("InvalidAccessError","With autoIncrement set, the keyPath argument must not be an array or empty string.");var o={name:e,keyPath:n,autoInc:r,indexList:{},idbdb:this},i=new IDBObjectStore(o,this.__versionTransaction);return IDBObjectStore.__createObjectStore(this,i),i},IDBDatabase.prototype.deleteObjectStore=function(e){if(0===arguments.length)throw new TypeError("No object store name was specified");IDBTransaction$1.__assertVersionChange(this.__versionTransaction),IDBTransaction$1.__assertActive(this.__versionTransaction),delete this.__versionTransaction.__storeClones[e];var t=this.__objectStores[e];if(!t)throw createDOMException("NotFoundError",'Object store "'+e+'" does not exist in '+this.name);IDBObjectStore.__deleteObjectStore(this,t)},IDBDatabase.prototype.close=function(){this.__closed=!0},IDBDatabase.prototype.transaction=function(e,t){var n=this;if("number"==typeof t?(t=1===t?"readwrite":"readonly",CFG.DEBUG&&console.log("Mode should be a string, but was specified as ",t)):t=t||"readonly","readonly"!==t&&"readwrite"!==t)throw new TypeError("Invalid transaction mode: "+t);if(IDBTransaction$1.__assertNotVersionChange(this.__versionTransaction),this.__closed)throw createDOMException("InvalidStateError","An attempt was made to start a new transaction on a database connection that is not open");if(e="string"==typeof e?[e]:e,e.forEach(function(e){if(!n.objectStoreNames.contains(e))throw createDOMException("NotFoundError",'The "'+e+'" object store does not exist')}),0===e.length)throw createDOMException("InvalidAccessError","No object store names were specified");return new IDBTransaction$1(this,e,t)},IDBDatabase.prototype.toString=function(){return"[object IDBDatabase]"},defineReadonlyProperties(IDBDatabase.prototype,["name","version","objectStoreNames"]),Object.assign(IDBDatabase.prototype,EventTarget$1.prototype);var _typeof$4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sysdb=void 0;IDBFactory.prototype.open=function(e,t){function n(){if(!i){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=findError(t);i=!0;var a=createEvent("error",t,{bubbles:!0});o.__readyState="done",o.__error=r||DOMException$1,o.dispatchEvent(a)}}function r(r){var i=CFG.win.openDatabase(escapeDatabaseName(e),1,e,CFG.DEFAULT_DB_SIZE);if(o.__readyState="done",void 0===t&&(t=r||1),r>t){var a=createDOMException("VersionError","An attempt was made to open a database using a lower version than the existing version.",t);return void n(a)}i.transaction(function(a){a.executeSql("CREATE TABLE IF NOT EXISTS __sys__ (name VARCHAR(255), keyPath VARCHAR(255), autoInc BOOLEAN, indexList BLOB, currNum INTEGER)",[],function(){a.executeSql("SELECT * FROM __sys__",[],function(a,s){if(o.__result=new IDBDatabase(i,e,t,s),r<t)sysdb.transaction(function(i){i.executeSql("UPDATE dbVersions SET version = ? WHERE name = ?",[t,e],function(){var e=new IDBVersionChangeEvent("upgradeneeded",{oldVersion:r,newVersion:t});o.__transaction=o.result.__versionTransaction=new IDBTransaction$1(o.result,o.result.objectStoreNames,"versionchange"),o.transaction.__addNonRequestToTransactionQueue(function(t,n,r,i){o.dispatchEvent(e),r()}),o.transaction.on__beforecomplete=function(){o.result.__versionTransaction=null},o.transaction.on__abort=function(){var e=createDOMException("AbortError","The upgrade transaction was aborted.");n(e)},o.transaction.on__complete=function(){if(o.__transaction=null,o.__result.__closed){var e=createDOMException("AbortError","The connection has been closed.");return void n(e)}var t=createEvent("success");o.dispatchEvent(t)}},n)},n);else{var u=createEvent("success");o.dispatchEvent(u)}},n)},n)},n)}var o=new IDBOpenDBRequest,i=!1;if(0===arguments.length)throw new TypeError("Database name is required");if(arguments.length>=2&&(t=Number(t),isNaN(t)||!isFinite(t)||t>=9007199254740992||t<1))throw new TypeError("Invalid database version: "+t);return e=String(e),createSysDB(function(){sysdb.transaction(function(o){o.executeSql("SELECT * FROM dbVersions WHERE name = ?",[e],function(o,i){0===i.rows.length?o.executeSql("INSERT INTO dbVersions VALUES (?,?)",[e,t||1],function(){r(0)},n):r(i.rows.item(0).version)},n)},n)},n),o},IDBFactory.prototype.deleteDatabase=function(e){function t(){if(!o){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=findError(t);r.__readyState="done",r.__error=i||DOMException$1;var a=createEvent("error",t,{bubbles:!0});r.dispatchEvent(a),o=!0}}function n(){sysdb.transaction(function(n){n.executeSql("DELETE FROM dbVersions WHERE name = ? ",[e],function(){r.__result=void 0,r.__readyState="done";var e=new IDBVersionChangeEvent("success",{oldVersion:i,newVersion:null});r.dispatchEvent(e)},t)},t)}var r=new IDBOpenDBRequest,o=!1,i=null;if(0===arguments.length)throw new TypeError("Database name is required");return e=String(e),createSysDB(function(){sysdb.transaction(function(o){o.executeSql("SELECT * FROM dbVersions WHERE name = ?",[e],function(o,a){if(0===a.rows.length){r.__result=void 0;var s=new IDBVersionChangeEvent("success",{oldVersion:i,newVersion:null});return void r.dispatchEvent(s)}i=a.rows.item(0).version;var u=CFG.win.openDatabase(escapeDatabaseName(e),1,e,CFG.DEFAULT_DB_SIZE);u.transaction(function(e){e.executeSql("SELECT * FROM __sys__",[],function(e,r){var o=r.rows;!function r(i){i>=o.length?e.executeSql("DROP TABLE IF EXISTS __sys__",[],function(){n()},t):e.executeSql("DROP TABLE "+escapeStore(o.item(i).name),[],function(){r(i+1)},function(){r(i+1)})}(0)},function(e){n()})})},t)},t)},t),r},IDBFactory.prototype.cmp=cmp,IDBFactory.prototype.webkitGetDatabaseNames=function(){function e(){if(!t){for(var e=arguments.length,r=Array(e),o=0;o<e;o++)r[o]=arguments[o];var i=findError(r);t=!0;var a=createEvent("error",r,{bubbles:!0,cancelable:!0});n.__readyState="done",n.__error=i||DOMException$1,n.dispatchEvent(a)}}var t=!1,n=new IDBRequest;return createSysDB(function(){sysdb.transaction(function(t){t.executeSql("SELECT name FROM dbVersions",[],function(e,t){for(var r=new StringList,o=0;o<t.rows.length;o++)r.push(t.rows.item(o).name);n.__result=r,n.__readyState="done";var i=createEvent("success");n.dispatchEvent(i)},e)},e)},e),n},IDBFactory.prototype.toString=function(){return"[object IDBFactory]"};var shimIndexedDB=new IDBFactory,_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_typeof$2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};IDBCursor.prototype.__find=function(){this.__multiEntryIndex?this.__findMultiEntry.apply(this,arguments):this.__findBasic.apply(this,arguments)},IDBCursor.prototype.__findBasic=function(e,t,n,r,o){var i=void 0!==o;o=o||1;var a=this,s=quote(a.__keyColumnName),u=["SELECT * FROM",escapeStore(a.__store.name)],c=[];u.push("WHERE",s,"NOT NULL"),setSQLForRange(a.__range,s,u,c,!0,!0);var l=a.__sqlDirection,f="ASC"===l?">":"<";void 0!==e?(u.push("AND",s,f+"= ?"),Key.convertValueToKey(e),c.push(Key.encode(e))):i&&void 0!==a.__key&&(u.push("AND",s,f+" ?"),Key.convertValueToKey(a.__key),c.push(Key.encode(a.__key))),a.__count||(u.push("ORDER BY",s,l),a.__unique||"key"===a.__keyColumnName||u.push(",",quote("key"),l),!a.__unique&&a.__indexSource&&u.push(",",quote(a.__valueColumnName),l),u.push("LIMIT",o)),u=u.join(" "),CFG.DEBUG&&console.log(u,c),t.executeSql(u,c,function(e,t){a.__count?n(void 0,t.rows.length,void 0):t.rows.length>1?(a.__prefetchedIndex=0,a.__prefetchedData=t.rows,CFG.DEBUG&&console.log("Preloaded "+a.__prefetchedData.length+" records for cursor"),a.__decode(t.rows.item(0),n)):1===t.rows.length?a.__decode(t.rows.item(0),n):(CFG.DEBUG&&console.log("Reached end of cursors"),n(void 0,void 0,void 0))},function(e,t){CFG.DEBUG&&console.log("Could not execute Cursor.continue",u,c),r(t)})},IDBCursor.prototype.__findMultiEntry=function(e,t,n,r){var o=this;if(o.__prefetchedData&&o.__prefetchedData.length===o.__prefetchedIndex)return CFG.DEBUG&&console.log("Reached end of multiEntry cursor"),void n(void 0,void 0,void 0);var i=quote(o.__keyColumnName),a=["SELECT * FROM",escapeStore(o.__store.name)],s=[];a.push("WHERE",i,"NOT NULL"),o.__range&&void 0!==o.__range.lower&&Array.isArray(o.__range.upper)&&0===o.__range.upper.indexOf(o.__range.lower)&&(a.push("AND",i,"LIKE ? ESCAPE '^'"),s.push("%"+sqlLIKEEscape(o.__range.__lowerCached.slice(0,-1))+"%"));var u=o.__sqlDirection,c="ASC"===u?">":"<";void 0!==e?(a.push("AND",i,c+"= ?"),Key.convertValueToKey(e),s.push(Key.encode(e))):void 0!==o.__key&&(a.push("AND",i,c+" ?"),Key.convertValueToKey(o.__key),s.push(Key.encode(o.__key))),o.__count||(a.push("ORDER BY",i,u),o.__unique||"key"===o.__keyColumnName||a.push(",",quote("key"),u),!o.__unique&&o.__indexSource&&a.push(",",quote(o.__valueColumnName),u)),a=a.join(" "),CFG.DEBUG&&console.log(a,s),t.executeSql(a,s,function(e,t){if(t.rows.length>0){var r=function(){if(o.__count){for(var e=0,r=0;r<t.rows.length;r++){var i=t.rows.item(r),a=Key.decode(i[o.__keyColumnName],!0),s=Key.findMultiEntryMatches(a,o.__range);e+=s.length}return n(void 0,e,void 0),{v:void 0}}for(var u=[],c=0;c<t.rows.length;c++)for(var l=t.rows.item(c),f=Key.decode(l[o.__keyColumnName],!0),p=Key.findMultiEntryMatches(f,o.__range),d=0;d<p.length;d++){var h=p[d],y={matchingKey:Key.encode(h,!0),key:l.key};y[o.__keyColumnName]=l[o.__keyColumnName],y[o.__valueColumnName]=l[o.__valueColumnName],u.push(y)}var _=0===o.direction.indexOf("prev");u.sort(function(e,t){return e.matchingKey.replace("[","z")<t.matchingKey.replace("[","z")?_?1:-1:e.matchingKey.replace("[","z")>t.matchingKey.replace("[","z")?_?-1:1:e.key<t.key?"prev"===o.direction?1:-1:e.key>t.key?"prev"===o.direction?-1:1:0}),u.length>1?(o.__prefetchedIndex=0,o.__prefetchedData={data:u,length:u.length,item:function(e){return this.data[e]}},CFG.DEBUG&&console.log("Preloaded "+o.__prefetchedData.length+" records for multiEntry cursor"),o.__decode(u[0],n)):1===u.length?(CFG.DEBUG&&console.log("Reached end of multiEntry cursor"),o.__decode(u[0],n)):(CFG.DEBUG&&console.log("Reached end of multiEntry cursor"),n(void 0,void 0,void 0))}();if("object"===("undefined"==typeof r?"undefined":_typeof$2(r)))return r.v}else CFG.DEBUG&&console.log("Reached end of multiEntry cursor"),n(void 0,void 0,void 0)},function(e,t){CFG.DEBUG&&console.log("Could not execute Cursor.continue",a,s),r(t)})},IDBCursor.prototype.__onsuccess=function(e){var t=this;return function(n,r,o){if(t.__gotValue=!0,t.__count)e(r,t.__req);else{t.__key=void 0===n?null:n,t.__primaryKey=void 0===o?null:o,t.__value=void 0===r?null:r;var i=void 0===n?null:t;e(i,t.__req)}}},IDBCursor.prototype.__decode=function(e,t){if(this.__multiEntryIndex&&this.__unique){if(this.__matchedKeys||(this.__matchedKeys={}),this.__matchedKeys[e.matchingKey])return void t(void 0,void 0,void 0);this.__matchedKeys[e.matchingKey]=!0}var n=Key.decode(this.__multiEntryIndex?e.matchingKey:e[this.__keyColumnName],this.__multiEntryIndex),r=this.__valueDecoder.decode(e[this.__valueColumnName]),o=Key.decode(e.key);t(n,r,o)},IDBCursor.prototype.__sourceOrEffectiveObjStoreDeleted=function(){if(!this.__store.transaction.db.objectStoreNames.contains(this.__store.name)||this.__indexSource&&!this.__store.indexNames.contains(this.source.name))throw createDOMException("InvalidStateError","The cursor's source or effective object store has been deleted")},IDBCursor.prototype.__addToCache=function(){this.__prefetchedData=null},IDBCursor.prototype.__deleteFromCache=function(e,t){this.__prefetchedData=null},IDBCursor.prototype.__clearFromCache=function(){this.__prefetchedData=null},IDBCursor.prototype.__continue=function(e,t){var n=this,r=n.__advanceCount||CFG.cursorPreloadPackSize||100,o=void 0!==n.__advanceCount;if(IDBTransaction$1.__assertActive(n.__store.transaction),n.__sourceOrEffectiveObjStoreDeleted(),!n.__gotValue&&!t)throw createDOMException("InvalidStateError","The cursor is being iterated or has iterated past its end.");if(void 0!==e&&Key.convertValueToKey(e),void 0!==e){var i=cmp(e,n.key);if(0===i||n.direction.includes("next")&&i===-1||n.direction.includes("prev")&&1===i)throw createDOMException("DataError","Cannot "+(o?"advance":"continue")+" the cursor in an unexpected direction")}n.__gotValue=!1,n.__req.__readyState="pending",n.__store.transaction.__pushToQueue(n.__req,function t(i,a,s,u,c){function l(e,t,r){if(o){if(n.__advanceCount>=2&&void 0!==e)return n.__advanceCount--,n.__key=e,n.__continue(void 0,!0),void c();n.__advanceCount=void 0}n.__onsuccess(s)(e,t,r)}return n.__prefetchedData&&(n.__prefetchedIndex++,n.__prefetchedIndex<n.__prefetchedData.length)?void n.__decode(n.__prefetchedData.item(n.__prefetchedIndex),function(r,o,c){function f(){return void 0!==e&&r!==e?void t(i,a,s,u):void l(r,o,c)}return n.__unique&&!n.__multiEntryIndex?void Sca.encode(o,function(e){Sca.encode(n.value,function(n){return e===n?void t(i,a,s,u):void f()})}):void f()}):void n.__find(e,i,l,function(){n.__advanceCount=void 0,u.apply(void 0,arguments)},r)})},IDBCursor.prototype.continue=function(e){this.__continue(e)},IDBCursor.prototype.advance=function(e){var t=this;if(!Number.isFinite(e)||e<=0)throw new TypeError("Count is invalid - 0 or negative: "+e);t.__gotValue&&(t.__advanceCount=e),t.__continue()},IDBCursor.prototype.update=function(e){var t=this;if(!arguments.length)throw new TypeError("A value must be passed to update()");if(IDBTransaction$1.__assertActive(t.__store.transaction),t.__store.transaction.__assertWritable(),t.__sourceOrEffectiveObjStoreDeleted(),!t.__gotValue)throw createDOMException("InvalidStateError","The cursor is being iterated or has iterated past its end.");if(t.__keyOnly)throw createDOMException("InvalidStateError","This cursor method cannot be called when the key only flag has been set.");if(throwIfNotClonable(e,"The data to be updated could not be cloned by the internal structured cloning algorithm."),null!==t.__store.keyPath){var n=t.__store.__validateKeyAndValue(e);if(t.primaryKey!==n)throw createDOMException("DataError","The key of the supplied value to `update` is not equal to the cursor's effective key")}return t.__store.transaction.__addToTransactionQueue(function(n,r,o,i){var a=t.key,s=t.primaryKey,u=t.__store;Sca.encode(e,function(e){var t=Sca.decode(e);Sca.encode(t,function(e){Key.convertValueToKey(s);var r="DELETE FROM "+escapeStore(u.name)+" WHERE key = ?",c=Key.encode(s);CFG.DEBUG&&console.log(r,e,a,s,c),n.executeSql(r,[c],function(n,r){CFG.DEBUG&&console.log("Did the row with the",s,"exist? ",r.rowsAffected),u.__deriveKey(n,t,a,function(r,s){u.__insertData(n,e,t,r,a,s,function(){u.__cursors.forEach(function(e){e.__deleteFromCache(),e.__addToCache()}),o.apply(void 0,arguments)},i)},function(e,t){i(t)})})})})},void 0,t)},IDBCursor.prototype.delete=function(){var e=this;if(IDBTransaction$1.__assertActive(e.__store.transaction),e.__store.transaction.__assertWritable(),e.__sourceOrEffectiveObjStoreDeleted(),!e.__gotValue)throw createDOMException("InvalidStateError","The cursor is being iterated or has iterated past its end.");if(e.__keyOnly)throw createDOMException("InvalidStateError","This cursor method cannot be called when the key only flag has been set.");return this.__store.transaction.__addToTransactionQueue(function(t,n,r,o){e.__find(void 0,t,function(n,i,a){var s="DELETE FROM  "+escapeStore(e.__store.name)+" WHERE key = ?";CFG.DEBUG&&console.log(s,n,a),Key.convertValueToKey(a),t.executeSql(s,[Key.encode(a)],function(t,i){1===i.rowsAffected?(e.__store.__cursors.forEach(function(e){e.__deleteFromCache()}),r(void 0)):o("No rows with key found"+n)},function(e,t){o(t)})},o)},void 0,e)},IDBCursor.prototype.toString=function(){return"[object IDBCursor]"},defineReadonlyProperties(IDBCursor.prototype,["key","primaryKey"]);var IDBCursorWithValue=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"toString",value:function(){return"[object IDBCursorWithValue]"}}]),t}(IDBCursor);defineReadonlyProperties(IDBCursorWithValue.prototype,"value");var _typeof$7="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},compoundKeysPropertyName="__$$compoundKey",propertySeparatorRegExp=/\$\$/g,propertySeparator="$$$$",keySeparator="$_$",_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},glob="undefined"!=typeof global?global:"undefined"!=typeof window?window:self;glob._babelPolyfill=!1;var IDB=void 0,indexeddb=function(e){return CFG.win={openDatabase:e},setGlobalVars},applyToScope=indexeddb(openDatabase);applyToScope(global),hybrid.dispatchExtendableEvent=function(e,t){var n=Promise.resolve().then(function(){return self.dispatchEvent(e),e.resolve()});return t&&(n=n.then(function(e){t.success(e)}).catch(function(e){t.failure(e)})),n},hybrid.dispatchFetchEvent=function(e){return Promise.resolve().then(function(){var t=new FetchEvent({request:e});return self.dispatchEvent(t),t.resolve()})};var events=createCommonjsModule(function(e){function t(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(e){return"function"==typeof e}function r(e){return"number"==typeof e}function o(e){return"object"==typeof e&&null!==e}function i(e){return void 0===e}e.exports=t,t.EventEmitter=t,t.prototype._events=void 0,t.prototype._maxListeners=void 0,t.defaultMaxListeners=10,t.prototype.setMaxListeners=function(e){if(!r(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},t.prototype.emit=function(e){var t,r,a,s,u,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;var l=new Error('Uncaught, unspecified "error" event. ('+t+")");throw l.context=t,l}if(r=this._events[e],i(r))return!1;if(n(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),r.apply(this,s)}else if(o(r))for(s=Array.prototype.slice.call(arguments,1),c=r.slice(),a=c.length,u=0;u<a;u++)c[u].apply(this,s);return!0},t.prototype.addListener=function(e,r){var a;if(!n(r))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,n(r.listener)?r.listener:r),this._events[e]?o(this._events[e])?this._events[e].push(r):this._events[e]=[this._events[e],r]:this._events[e]=r,o(this._events[e])&&!this._events[e].warned&&(a=i(this._maxListeners)?t.defaultMaxListeners:this._maxListeners,a&&a>0&&this._events[e].length>a&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},t.prototype.on=t.prototype.addListener,t.prototype.once=function(e,t){function r(){this.removeListener(e,r),o||(o=!0,t.apply(this,arguments))}if(!n(t))throw TypeError("listener must be a function");var o=!1;return r.listener=t,this.on(e,r),this},t.prototype.removeListener=function(e,t){var r,i,a,s;if(!n(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(r=this._events[e],a=r.length,i=-1,r===t||n(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(r)){for(s=a;s-- >0;)if(r[s]===t||r[s].listener&&r[s].listener===t){i=s;break}if(i<0)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},t.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},
this}if(r=this._events[e],n(r))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},t.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?n(this._events[e])?[this._events[e]]:this._events[e].slice():[]},t.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(n(t))return 1;if(t)return t.length}return 0},t.listenerCount=function(e,t){return e.listenerCount(t)}}),events$1=interopDefault(events),EventEmitter=Object.freeze({default:events$1}),ee=EventEmitter,emitter=new(ee.default||ee),selfAsAny$1=self;selfAsAny$1.addEventListener=emitter.addListener.bind(emitter),selfAsAny$1.removeEventListener=emitter.removeListener.bind(emitter),selfAsAny$1.dispatchEvent=function(e){emitter.emit(e.type,e)};var selfAsAny=self;